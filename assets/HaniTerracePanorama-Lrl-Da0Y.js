import{c as j,r as c,j as e,V as C,A as f,m as h,d as u,S,M as P}from"./index-CIFreg_9.js";import{C as T,O as R,a as H}from"./OrbitControls-CcGKTEhn.js";import{V as m,O as E}from"./three.module-C2hvsvVY.js";import{B as g}from"./Button-CAZ9oYUG.js";import{V as I}from"./volume-x-CWT2ok6J.js";import{R as L}from"./rotate-ccw-B2lbR2yx.js";import{C as F}from"./chevron-right-B_0CgUWH.js";import{u as V}from"./Progress-G2MA8nKt.js";import{H as b}from"./Html-D158LjGk.js";import{I as w}from"./info-CAWq1lxm.js";import{E as Z}from"./eye-ArUahLtl.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=j("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=j("Wheat",[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]]);function O(){const{progress:t}=V();return e.jsx(b,{center:!0,children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-palace-500 border-t-transparent rounded-full animate-spin"}),e.jsxs("p",{className:"text-white font-medium",children:["åŠ è½½å…¨æ™¯ä¸­ ",t.toFixed(0),"%"]})]})})}const x=[{id:"terrace",position:new m(-8,0,5),title:"åƒå¹´æ¢¯ç”°",description:"å“ˆå°¼æ¢¯ç”°å·²æœ‰1300å¤šå¹´å†å²ï¼Œæ˜¯å“ˆå°¼æ—äººæ°‘ä¸–ä»£è€•ä½œçš„ç»“æ™¶ï¼Œ2013å¹´è¢«åˆ—å…¥ä¸–ç•Œæ–‡åŒ–é—äº§åå½•ã€‚",icon:"mountain"},{id:"village",position:new m(5,2,-8),title:"è˜‘è‡æˆ¿",description:"å“ˆå°¼æ—ä¼ ç»Ÿæ°‘å±…ï¼Œå±‹é¡¶å‘ˆè˜‘è‡å½¢çŠ¶ï¼Œä»¥èŒ…è‰è¦†ç›–ï¼Œå†¬æš–å¤å‡‰ï¼Œä¸è‡ªç„¶å’Œè°å…±ç”Ÿã€‚",icon:"users"},{id:"farming",position:new m(8,-1,3),title:"å†œè€•æ–‡åŒ–",description:'å“ˆå°¼æ—ç‹¬åˆ›çš„"æœ¨åˆ»åˆ†æ°´"çŒæº‰ç³»ç»Ÿï¼ŒæŒ‰è§„å®šæ—¶é—´ã€æ¯”ä¾‹åˆ†é…æ°´æºï¼Œä½“ç°äº†å¤è€çš„ç”Ÿæ€æ™ºæ…§ã€‚',icon:"wheat"},{id:"feast",position:new m(-5,-2,-7),title:"é•¿è¡—å®´",description:'æ¯å¹´å†œå†åæœˆï¼Œå“ˆå°¼æ—ä¸¾åŠç››å¤§çš„"é•¿è¡—å®´"ï¼Œå®¶å®¶æˆ·æˆ·æ‘†å‡ºç¾é£Ÿï¼Œåº†ç¥ä¸°æ”¶ï¼Œæ˜¯å›½å®¶çº§éé—é¡¹ç›®ã€‚',icon:"info"}];function A(){const t=c.useRef(null),a=new E(50,64,64);return a.scale(-1,1,1),e.jsx("mesh",{ref:t,geometry:a,children:e.jsx("meshBasicMaterial",{children:e.jsx("canvasTexture",{attach:"map",image:z()})})})}function z(){const t=document.createElement("canvas");t.width=2048,t.height=1024;const a=t.getContext("2d"),n=a.createLinearGradient(0,0,0,t.height*.4);n.addColorStop(0,"#87CEEB"),n.addColorStop(1,"#E0F4FF"),a.fillStyle=n,a.fillRect(0,0,t.width,t.height*.4),a.fillStyle="#4A6741",a.beginPath(),a.moveTo(0,t.height*.4);for(let s=0;s<=t.width;s+=50){const i=t.height*.35+Math.sin(s*.01)*50+Math.random()*30;a.lineTo(s,i)}a.lineTo(t.width,t.height),a.lineTo(0,t.height),a.fill();for(let s=0;s<8;s++){const i=t.height*(.4+s*.07),o=100+s*5;a.fillStyle=`hsl(${o}, 50%, ${45+s*3}%)`,a.beginPath(),a.moveTo(0,i);for(let r=0;r<=t.width;r+=30){const d=i+Math.sin(r*.02+s)*15;a.lineTo(r,d)}a.lineTo(t.width,i+80),a.lineTo(0,i+80),a.fill()}a.fillStyle="rgba(135, 206, 235, 0.3)";for(let s=0;s<20;s++){const i=Math.random()*t.width,o=t.height*.5+Math.random()*t.height*.3;a.fillRect(i,o,100,5)}return t}function B({hotspot:t,isActive:a,onClick:n}){const s=c.useRef(null),[i,o]=c.useState(!1);H(d=>{s.current&&(s.current.lookAt(d.camera.position),s.current.position.y=t.position.y+Math.sin(d.clock.elapsedTime*2)*.1)});const r={mountain:u,users:v,wheat:N,info:w}[t.icon];return e.jsx("group",{ref:s,position:t.position,onClick:n,onPointerOver:()=>o(!0),onPointerOut:()=>o(!1),children:e.jsx(b,{center:!0,children:e.jsx(h.button,{animate:{scale:i||a?1.2:1,boxShadow:a?"0 0 20px rgba(167, 58, 54, 0.6)":"0 0 10px rgba(0,0,0,0.3)"},className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors ${a?"bg-palace-500 text-white":"bg-white/90 text-mountain-700 hover:bg-palace-100"}`,style:{cursor:"pointer"},children:e.jsx(r,{className:"w-6 h-6"})})})})}function G({hotspots:t,activeHotspot:a,onHotspotClick:n}){return e.jsxs(e.Fragment,{children:[e.jsx(A,{}),t.map(s=>e.jsx(B,{hotspot:s,isActive:a===s.id,onClick:()=>n(s.id)},s.id)),e.jsx(R,{enableZoom:!1,enablePan:!1,rotateSpeed:-.3,minPolarAngle:Math.PI*.3,maxPolarAngle:Math.PI*.7})]})}function $({hotspot:t,onClose:a,onCollect:n}){if(!t)return null;const s={mountain:u,users:v,wheat:N,info:w}[t.icon];return e.jsxs(h.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"absolute right-4 top-1/2 -translate-y-1/2 w-80 bg-white/95 backdrop-blur rounded-2xl p-6 shadow-card z-20",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-1 rounded-full hover:bg-paper-500",children:"âœ•"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-palace-500 rounded-xl flex items-center justify-center",children:e.jsx(s,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-mountain-800",children:t.title})]}),e.jsx("p",{className:"text-mountain-600 mb-6 leading-relaxed",children:t.description}),e.jsxs(g,{variant:"heritage",className:"w-full",onClick:n,children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"æ”¶é›†æ–‡è„‰ç¢ç‰‡"]})]})}function U(){return e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"absolute bottom-20 left-1/2 -translate-x-1/2",children:e.jsxs("div",{className:"flex items-center gap-4 px-6 py-3 bg-white/90 backdrop-blur rounded-full text-mountain-600 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:"æ‹–åŠ¨ç¯é¡¾å››å‘¨"})]}),e.jsx("div",{className:"w-px h-4 bg-mountain-300"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{children:"ç‚¹å‡»çƒ­ç‚¹æ¢ç´¢"})]})]})})}function ae(){const[t,a]=c.useState(null),[n,s]=c.useState(!0),[i,o]=c.useState([]),[r,d]=c.useState(!1),y=l=>{a(t===l?null:l)},k=()=>{t&&!i.includes(t)&&(o(l=>[...l,t]),i.length+1>=x.length&&setTimeout(()=>d(!0),500)),a(null)},p=()=>{a(null),o([]),d(!1)},M=x.find(l=>l.id===t)||null;return e.jsxs("div",{className:"relative w-full h-screen bg-mountain-900",children:[e.jsx(T,{camera:{fov:75,position:[0,0,.1]},children:e.jsx(c.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(G,{hotspots:x,activeHotspot:t,onHotspotClick:y})})}),e.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 bg-gradient-to-b from-black/60 to-transparent z-10",children:e.jsxs("div",{className:"max-w-lg mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("h2",{className:"text-xl font-bold",children:"å“ˆå°¼æ¢¯ç”°"}),e.jsx("p",{className:"text-sm text-white/70",children:"ä¸–ç•Œæ–‡åŒ–é—äº§ Â· VRå…¨æ™¯"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>s(!n),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 text-white",children:n?e.jsx(I,{className:"w-5 h-5"}):e.jsx(C,{className:"w-5 h-5"})}),e.jsx("button",{onClick:p,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 text-white",children:e.jsx(L,{className:"w-5 h-5"})})]})]})}),e.jsx("div",{className:"absolute top-20 left-4 z-10",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-mountain-500 mb-2",children:"æ–‡è„‰ç¢ç‰‡æ”¶é›†"}),e.jsx("div",{className:"flex gap-1",children:x.map(l=>e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-xs ${i.includes(l.id)?"bg-palace-500 text-white":"bg-paper-600 text-mountain-400"}`,children:i.includes(l.id)?"âœ“":"?"},l.id))})]})}),e.jsx(f,{children:e.jsx($,{hotspot:M,onClose:()=>a(null),onCollect:k})}),!t&&e.jsx(U,{}),e.jsx(f,{children:r&&e.jsx(h.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute inset-0 flex items-center justify-center bg-black/70 z-50",children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-sm mx-4 text-center",children:[e.jsx(h.div,{animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:.5,repeat:2},children:e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-gold-400 to-gold-600 rounded-2xl flex items-center justify-center shadow-heritage",children:e.jsx(u,{className:"w-12 h-12 text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-mountain-800 mb-2",children:"ğŸ‰ æ¢ç´¢å®Œæˆï¼"}),e.jsx("p",{className:"text-mountain-500 mb-4",children:"æ‚¨å·²æ”¶é›†æ‰€æœ‰å“ˆå°¼æ¢¯ç”°æ–‡è„‰ç¢ç‰‡"}),e.jsxs("div",{className:"bg-paper-500 rounded-xl p-4 mb-6",children:[e.jsx("p",{className:"font-bold text-palace-600",children:"è·å¾—æˆå°±"}),e.jsx("p",{className:"text-sm text-mountain-600",children:"ã€Œæ¢¯ç”°å®ˆæœ›è€…ã€å¾½ç« "})]}),e.jsxs(g,{variant:"heritage",className:"w-full",onClick:p,children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"ç»§ç»­æ¢ç´¢"]})]})})})]})}export{ae as default};
