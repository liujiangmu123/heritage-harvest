import{r as e,j as s}from"./three-vendor-BoyHWg1a.js";import{C as a}from"./Card-A_2Ty7OA.js";import{B as t}from"./Badge-DTmqmyMd.js";import{u as l,a as i,B as n}from"./index-DkRoqGlp.js";import{Z as r,aI as c,aJ as d,aK as m,T as o,H as x,s as h,d as b,N as j,m as u,L as p,E as N,r as f,A as g,X as v}from"./ui-vendor-BCOa7pYq.js";import"./core-vendor-Csnc5NqJ.js";const y=[{id:"forest",name:"æ£®æ—",icon:o,color:"text-green-600 bg-green-100",description:'å±±é¡¶æ£®æ—æ˜¯æ•´ä¸ªç”Ÿæ€ç³»ç»Ÿçš„"æ°´å¡”"',role:"æ¶µå…»æ°´æºã€è°ƒèŠ‚æ°”å€™ã€å›ºç¢³é‡Šæ°§"},{id:"village",name:"æ‘å¯¨",icon:x,color:"text-amber-600 bg-amber-100",description:"æ‘å¯¨ä½äºæ£®æ—ä¸æ¢¯ç”°ä¹‹é—´",role:"äººä¸è‡ªç„¶å’Œè°å…±ç”Ÿçš„çº½å¸¦"},{id:"terrace",name:"æ¢¯ç”°",icon:b,color:"text-eco-600 bg-eco-100",description:"å±‚å±‚æ¢¯ç”°æ˜¯å†œä¸šç”Ÿäº§çš„æ ¸å¿ƒ",role:"ç²®é£Ÿç”Ÿäº§ã€æ°´åœŸä¿æŒã€æ™¯è§‚å¡‘é€ "},{id:"water",name:"æ°´ç³»",icon:j,color:"text-blue-600 bg-blue-100",description:"æ°´ç³»è´¯ç©¿æ•´ä¸ªç”Ÿæ€ç³»ç»Ÿ",role:"çŒæº‰å†œç”°ã€ç»´æŒç”Ÿæ€ã€å¾ªç¯åˆ©ç”¨"}],w={rainfall:1400,temperature:18,humanIntervention:30,forestCoverage:70};function k(e){const{rainfall:s,temperature:a,humanIntervention:t,forestCoverage:l}=e,i=Math.min(100,s/20*(l/100)*1.2),n=Math.max(0,.8*l-.3*t+20),r=Math.max(0,.5*l+.3*(100-t)+(a>15&&a<22?20:10)),c=50*l+10*(100-t),d=Math.max(0,3*i+(a>15&&a<25?100:50)+2*n),m=(i+n+r)/3;return{waterLevel:Math.round(i),soilHealth:Math.round(n),biodiversity:Math.round(r),carbonAbsorption:Math.round(c),riceYield:Math.round(d),stability:Math.round(m)}}function C({className:b="",onComplete:C}){const[M,$]=e.useState(w),[A,S]=e.useState(!1),[L,I]=e.useState(null),[Y,H]=e.useState(!1),[z,B]=e.useState(new Set),{addPoints:P}=l(),{addCarbonSaving:T}=i(),E=e.useMemo(()=>k(M),[M]),F=e.useMemo(()=>k(w),[]),J=e.useCallback((e,s)=>{$(a=>({...a,[e]:s}))},[]),K=e.useCallback(()=>{$(w)},[]),O=e.useCallback(e=>{I(e),B(s=>new Set([...s,e.id]))},[]),Z=e.useCallback(()=>{H(!0),P({type:"learn",points:50,description:"å®Œæˆç”Ÿæ€æ•°å­—å­ªç”Ÿæ¢ç´¢",relatedId:"eco-digital-twin"}),T({type:"digital_experience",carbonSaved:500,description:"æ•°å­—å­ªç”Ÿå­¦ä¹ æ›¿ä»£å®åœ°è€ƒå¯Ÿ"}),null==C||C()},[P,T,C]),_=e=>e>=70?"text-eco-600":e>=40?"text-amber-600":"text-red-600",q=e=>e>=70?"bg-eco-500":e>=40?"bg-amber-500":"bg-red-500";return s.jsxs("div",{className:`${b}`,children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-ink-900",children:"ç”Ÿæ€æ•°å­—å­ªç”Ÿ"}),s.jsx("p",{className:"text-ink-500",children:"æ¨¡æ‹Ÿå“ˆå°¼æ¢¯ç”°ç”Ÿæ€ç³»ç»Ÿï¼Œæ¢ç´¢å¯æŒç»­å†œä¸šæ™ºæ…§"})]}),s.jsxs(t,{variant:"eco",className:"flex items-center gap-1",children:[s.jsx(r,{className:"w-4 h-4"}),"äº¤äº’å¼æ¨¡æ‹Ÿ"]})]})}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs(a,{className:"p-4",children:[s.jsxs("h3",{className:"font-bold text-ink-900 mb-4 flex items-center gap-2",children:[s.jsx(c,{className:"w-5 h-5 text-amber-500"}),"ç¯å¢ƒå‚æ•°"]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm text-ink-600 flex items-center gap-1",children:[s.jsx(d,{className:"w-4 h-4"}),"å¹´é™é›¨é‡"]}),s.jsxs("span",{className:"text-sm font-medium text-ink-900",children:[M.rainfall," mm"]})]}),s.jsx("input",{type:"range",min:"800",max:"2000",value:M.rainfall,onChange:e=>J("rainfall",Number(e.target.value)),className:"w-full h-2 bg-blue-100 rounded-lg appearance-none cursor-pointer accent-blue-500"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm text-ink-600 flex items-center gap-1",children:[s.jsx(m,{className:"w-4 h-4"}),"å¹³å‡æ¸©åº¦"]}),s.jsxs("span",{className:"text-sm font-medium text-ink-900",children:[M.temperature,"Â°C"]})]}),s.jsx("input",{type:"range",min:"10",max:"25",value:M.temperature,onChange:e=>J("temperature",Number(e.target.value)),className:"w-full h-2 bg-orange-100 rounded-lg appearance-none cursor-pointer accent-orange-500"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm text-ink-600 flex items-center gap-1",children:[s.jsx(o,{className:"w-4 h-4"}),"æ£®æ—è¦†ç›–ç‡"]}),s.jsxs("span",{className:"text-sm font-medium text-ink-900",children:[M.forestCoverage,"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"100",value:M.forestCoverage,onChange:e=>J("forestCoverage",Number(e.target.value)),className:"w-full h-2 bg-green-100 rounded-lg appearance-none cursor-pointer accent-green-500"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm text-ink-600 flex items-center gap-1",children:[s.jsx(x,{className:"w-4 h-4"}),"äººç±»å¹²é¢„ç¨‹åº¦"]}),s.jsxs("span",{className:"text-sm font-medium text-ink-900",children:[M.humanIntervention,"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"100",value:M.humanIntervention,onChange:e=>J("humanIntervention",Number(e.target.value)),className:"w-full h-2 bg-amber-100 rounded-lg appearance-none cursor-pointer accent-amber-500"})]}),s.jsxs(n,{variant:"outline",size:"sm",onClick:K,className:"w-full flex items-center justify-center gap-2",children:[s.jsx(h,{className:"w-4 h-4"}),"é‡ç½®ä¸ºä¼ ç»Ÿæ¨¡å¼"]})]}),s.jsxs(a,{className:"p-4",children:[s.jsx("h3",{className:"font-bold text-ink-900 mb-4",children:"å››ç´ åŒæ„"}),s.jsx("div",{className:"space-y-2",children:y.map(e=>s.jsxs("button",{onClick:()=>O(e),className:"w-full p-3 rounded-xl flex items-center gap-3 transition-all "+(z.has(e.id)?"bg-eco-50 border border-eco-200":"bg-gray-50 hover:bg-gray-100"),children:[s.jsx("div",{className:`w-10 h-10 rounded-lg ${e.color} flex items-center justify-center`,children:s.jsx(e.icon,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("div",{className:"font-medium text-ink-900",children:e.name}),s.jsx("div",{className:"text-xs text-ink-500 truncate",children:e.role})]}),z.has(e.id)&&s.jsx(t,{variant:"eco",className:"text-xs",children:"å·²æ¢ç´¢"})]},e.id))})]})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[s.jsxs(a,{className:"p-6 bg-gradient-to-b from-sky-100 via-green-50 to-amber-50 min-h-[400px] relative overflow-hidden",children:[s.jsxs("div",{className:"absolute top-0 left-0 right-0 h-24 bg-gradient-to-b from-sky-300 to-sky-100",children:[s.jsx(c,{className:"absolute top-4 right-8 w-12 h-12 text-amber-400"}),M.rainfall>1200&&s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"absolute top-6 left-8 w-10 h-10 text-white/80"}),s.jsx(d,{className:"absolute top-4 left-24 w-8 h-8 text-white/60"})]})]}),s.jsx("div",{className:"absolute top-20 left-0 right-0 flex justify-center gap-1",style:{opacity:M.forestCoverage/100},children:Array.from({length:Math.ceil(M.forestCoverage/10)}).map((e,a)=>s.jsx(o,{className:"w-8 h-8 text-green-600",style:{transform:`translateY(${4*Math.sin(a)}px)`}},a))}),s.jsx("div",{className:"absolute top-36 left-1/2 -translate-x-1/2 flex gap-2",children:Array.from({length:3}).map((e,a)=>s.jsx(x,{className:"w-6 h-6 text-amber-700"},a))}),s.jsx("div",{className:"absolute bottom-16 left-0 right-0",children:Array.from({length:5}).map((e,a)=>s.jsx("div",{className:"h-8 mx-auto rounded-t-full",style:{width:60+8*a+"%",background:`linear-gradient(to right, #86efac ${E.waterLevel}%, #a3e635 ${E.waterLevel}%)`,marginTop:"-4px",opacity:.8+.04*a}},a))}),s.jsx(u.div,{animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},className:"absolute bottom-4 left-1/2 -translate-x-1/2",children:s.jsx(j,{className:"w-8 h-8 text-blue-500"})}),s.jsxs("div",{className:"absolute bottom-4 right-4 bg-white/90 backdrop-blur rounded-xl p-3 shadow-lg",children:[s.jsx("div",{className:"text-xs text-ink-500 mb-1",children:"ç³»ç»Ÿç¨³å®šæ€§"}),s.jsxs("div",{className:`text-2xl font-bold ${_(E.stability)}`,children:[E.stability,"%"]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs(a,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(j,{className:"w-5 h-5 text-blue-500"}),s.jsx("span",{className:"text-sm text-ink-600",children:"æ°´ä½"})]}),s.jsxs("div",{className:`text-2xl font-bold ${_(E.waterLevel)}`,children:[E.waterLevel,"%"]}),s.jsx("div",{className:"mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${q(E.waterLevel)} transition-all`,style:{width:`${E.waterLevel}%`}})})]}),s.jsxs(a,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(p,{className:"w-5 h-5 text-eco-500"}),s.jsx("span",{className:"text-sm text-ink-600",children:"åœŸå£¤å¥åº·"})]}),s.jsxs("div",{className:`text-2xl font-bold ${_(E.soilHealth)}`,children:[E.soilHealth,"%"]}),s.jsx("div",{className:"mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${q(E.soilHealth)} transition-all`,style:{width:`${E.soilHealth}%`}})})]}),s.jsxs(a,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(o,{className:"w-5 h-5 text-green-500"}),s.jsx("span",{className:"text-sm text-ink-600",children:"ç”Ÿç‰©å¤šæ ·æ€§"})]}),s.jsxs("div",{className:`text-2xl font-bold ${_(E.biodiversity)}`,children:[E.biodiversity,"%"]}),s.jsx("div",{className:"mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${q(E.biodiversity)} transition-all`,style:{width:`${E.biodiversity}%`}})})]})]}),s.jsxs(a,{className:"p-4",children:[s.jsx("h3",{className:"font-bold text-ink-900 mb-4",children:"ç”Ÿæ€äº§å‡º"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 bg-eco-50 rounded-xl",children:[s.jsx("div",{className:"text-sm text-eco-600 mb-1",children:"å¹´ç¢³å¸æ”¶é‡"}),s.jsxs("div",{className:"text-2xl font-bold text-eco-700",children:[E.carbonAbsorption," kg"]}),s.jsxs("div",{className:"text-xs text-eco-500 mt-1",children:[E.carbonAbsorption>F.carbonAbsorption?"â†‘":"â†“","å¯¹æ¯”ä¼ ç»Ÿæ¨¡å¼ ",Math.abs(E.carbonAbsorption-F.carbonAbsorption)," kg"]})]}),s.jsxs("div",{className:"p-4 bg-amber-50 rounded-xl",children:[s.jsx("div",{className:"text-sm text-amber-600 mb-1",children:"æ°´ç¨»äº§é‡"}),s.jsxs("div",{className:"text-2xl font-bold text-amber-700",children:[E.riceYield," kg/äº©"]}),s.jsxs("div",{className:"text-xs text-amber-500 mt-1",children:[E.riceYield>F.riceYield?"â†‘":"â†“","å¯¹æ¯”ä¼ ç»Ÿæ¨¡å¼ ",Math.abs(E.riceYield-F.riceYield)," kg"]})]})]})]}),z.size>=4&&s.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:s.jsxs(n,{variant:"eco",size:"lg",onClick:Z,className:"w-full flex items-center justify-center gap-2",children:[s.jsx(N,{className:"w-5 h-5"}),"ç”Ÿæˆç”Ÿæ€æ´å¯ŸæŠ¥å‘Š",s.jsx(f,{className:"w-5 h-5"})]})})]})]}),s.jsx(g,{children:L&&s.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>I(null),children:s.jsxs(u.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl max-w-md w-full p-6",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:`w-14 h-14 rounded-xl ${L.color} flex items-center justify-center`,children:s.jsx(L.icon,{className:"w-7 h-7"})}),s.jsx("button",{onClick:()=>I(null),className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200",children:s.jsx(v,{className:"w-5 h-5 text-ink-600"})})]}),s.jsx("h3",{className:"text-xl font-bold text-ink-900 mb-2",children:L.name}),s.jsx("p",{className:"text-ink-600 mb-4",children:L.description}),s.jsxs("div",{className:"p-4 bg-eco-50 rounded-xl mb-4",children:[s.jsx("div",{className:"text-sm font-medium text-eco-700 mb-1",children:"ç”Ÿæ€åŠŸèƒ½"}),s.jsx("p",{className:"text-eco-600",children:L.role})]}),s.jsx(t,{variant:"eco",className:"w-full justify-center py-2",children:"å·²æ·»åŠ åˆ°æ¢ç´¢è®°å½•"})]})})}),s.jsx(g,{children:Y&&s.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>H(!1),children:s.jsxs(u.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-eco-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(N,{className:"w-8 h-8 text-eco-600"})}),s.jsx("h3",{className:"text-2xl font-bold text-ink-900",children:"ç”Ÿæ€æ´å¯ŸæŠ¥å‘Š"}),s.jsx("p",{className:"text-ink-500",children:"å“ˆå°¼æ¢¯ç”°ç”Ÿæ€ç³»ç»Ÿåˆ†æ"})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"p-4 bg-eco-50 rounded-xl",children:[s.jsx("h4",{className:"font-bold text-eco-800 mb-2",children:"ğŸŒ³ æ ¸å¿ƒå‘ç°"}),s.jsx("p",{className:"text-sm text-eco-700",children:'å“ˆå°¼æ¢¯ç”°çš„"å››ç´ åŒæ„"ä½“ç³»å±•ç¤ºäº†äººä¸è‡ªç„¶å’Œè°å…±ç”Ÿçš„å…¸èŒƒã€‚ æ£®æ—æ¶µå…»æ°´æºï¼Œæ‘å¯¨è¿æ¥è‡ªç„¶ä¸å†œä¸šï¼Œæ¢¯ç”°å®ç°å¯æŒç»­ç”Ÿäº§ï¼Œ æ°´ç³»å¾ªç¯åˆ©ç”¨ï¼Œå½¢æˆå®Œæ•´çš„ç”Ÿæ€é—­ç¯ã€‚'})]}),s.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl",children:[s.jsx("h4",{className:"font-bold text-blue-800 mb-2",children:"ğŸ’§ æ°´å¾ªç¯æ™ºæ…§"}),s.jsx("p",{className:"text-sm text-blue-700",children:'ä¼ ç»Ÿçš„"æœ¨åˆ»åˆ†æ°´"åˆ¶åº¦ç¡®ä¿æ°´èµ„æºå…¬å¹³åˆ†é…ï¼Œ ä½“ç°äº†å¤äººå¯¹å¯æŒç»­å‘å±•çš„æ·±åˆ»ç†è§£ã€‚'})]}),s.jsxs("div",{className:"p-4 bg-amber-50 rounded-xl",children:[s.jsx("h4",{className:"font-bold text-amber-800 mb-2",children:"ğŸŒ¾ ç°ä»£å¯ç¤º"}),s.jsx("p",{className:"text-sm text-amber-700",children:"è¿™ç§ç”Ÿæ€å†œä¸šæ¨¡å¼ä¸ºç°ä»£å¯æŒç»­å‘å±•æä¾›äº†å®è´µç»éªŒï¼š å°Šé‡è‡ªç„¶è§„å¾‹ã€ç»´æŠ¤ç”Ÿæ€å¹³è¡¡ã€å®ç°äººä¸è‡ªç„¶å’Œè°å…±ç”Ÿã€‚"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-eco-100 to-bamboo-100 rounded-xl mb-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-eco-600",children:"è·å¾—å¥–åŠ±"}),s.jsx("div",{className:"font-bold text-eco-800",children:"+50 ç»¿è‰²ç§¯åˆ†"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-eco-600",children:"ç¢³å‡æ’"}),s.jsx("div",{className:"font-bold text-eco-800",children:"+500g COâ‚‚"})]})]}),s.jsx(n,{variant:"eco",className:"w-full",onClick:()=>H(!1),children:"å®Œæˆæ¢ç´¢"})]})})})]})}export{C as default};
