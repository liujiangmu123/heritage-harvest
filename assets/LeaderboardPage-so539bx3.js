import{r as e,j as s}from"./three-vendor-BoyHWg1a.js";import{B as a}from"./Badge-DTmqmyMd.js";import{u as t,a as r,E as n}from"./index-DkRoqGlp.js";import{a as o}from"./index-BE9RTL0L.js";import{ah as i,u as c,E as l,T as d,L as m,A as x,m as p,ar as u,as as h,at as b,aa as v,a8 as j,F as N}from"./ui-vendor-BCOa7pYq.js";import{C as f}from"./Card-A_2Ty7OA.js";import"./core-vendor-Csnc5NqJ.js";import"./ecoAchievementStore-30xRUVWQ.js";const g=[{rank:1,userId:"1",userName:"绿色先锋",userAvatar:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=100",ecoLevel:"master",points:2850,carbonSaved:45e3,experiencesCompleted:28,sharesCount:56,trend:"same"},{rank:2,userId:"2",userName:"生态守护者",userAvatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100",ecoLevel:"guardian",points:2340,carbonSaved:38e3,experiencesCompleted:24,sharesCount:42,trend:"up",trendValue:2},{rank:3,userId:"3",userName:"环保达人",userAvatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100",ecoLevel:"guardian",points:1980,carbonSaved:32e3,experiencesCompleted:20,sharesCount:35,trend:"up",trendValue:1},{rank:4,userId:"4",userName:"绿色使者",userAvatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100",ecoLevel:"sprout",points:1560,carbonSaved:25e3,experiencesCompleted:16,sharesCount:28,trend:"down",trendValue:1},{rank:5,userId:"5",userName:"生态新星",userAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100",ecoLevel:"sprout",points:1280,carbonSaved:2e4,experiencesCompleted:14,sharesCount:22,trend:"up",trendValue:3},{rank:6,userId:"6",userName:"环保小能手",userAvatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100",ecoLevel:"sprout",points:980,carbonSaved:15e3,experiencesCompleted:12,sharesCount:18,trend:"same"},{rank:7,userId:"7",userName:"绿色行者",userAvatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100",ecoLevel:"seedling",points:720,carbonSaved:11e3,experiencesCompleted:9,sharesCount:14,trend:"up",trendValue:2},{rank:8,userId:"8",userName:"生态学徒",userAvatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100",ecoLevel:"seedling",points:540,carbonSaved:8e3,experiencesCompleted:7,sharesCount:10,trend:"down",trendValue:2},{rank:9,userId:"9",userName:"环保新人",userAvatar:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100",ecoLevel:"seedling",points:380,carbonSaved:5500,experiencesCompleted:5,sharesCount:6,trend:"same"},{rank:10,userId:"10",userName:"绿色萌新",userAvatar:"https://images.unsplash.com/photo-1517841905240-472988babdf9?w=100",ecoLevel:"seedling",points:220,carbonSaved:3200,experiencesCompleted:3,sharesCount:4,trend:"up",trendValue:5}],w={weekly:"周榜",monthly:"月榜","all-time":"总榜"},k={points:{label:"绿色积分",icon:m},carbon:{label:"碳减排",icon:d},experiences:{label:"体验完成",icon:l},shares:{label:"分享次数",icon:c}};function C({rank:e}){return 1===e?s.jsx(u,{className:"w-6 h-6 text-amber-500"}):2===e?s.jsx(h,{className:"w-6 h-6 text-gray-400"}):3===e?s.jsx(h,{className:"w-6 h-6 text-amber-700"}):s.jsx("span",{className:"w-6 h-6 flex items-center justify-center text-ink-500 font-bold",children:e})}function y({trend:e,value:a}){return"same"===e?s.jsx("span",{className:"text-xs text-ink-400",children:"-"}):"up"===e?s.jsxs("span",{className:"flex items-center text-xs text-eco-600",children:[s.jsx(b,{className:"w-3 h-3"}),a]}):s.jsxs("span",{className:"flex items-center text-xs text-red-500",children:[s.jsx(v,{className:"w-3 h-3"}),a]})}function S({entry:e,metric:t,isCurrentUser:r}){const o=n[e.ecoLevel];return s.jsxs(p.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-4 p-4 rounded-xl transition-colors "+(r?"bg-eco-50 border-2 border-eco-300":e.rank<=3?"bg-gradient-to-r from-amber-50 to-orange-50":"bg-white hover:bg-gray-50"),children:[s.jsx("div",{className:"w-8 flex-shrink-0",children:s.jsx(C,{rank:e.rank})}),s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:e.userAvatar,alt:e.userName,className:"w-12 h-12 rounded-full object-cover border-2 border-white shadow"}),s.jsx("span",{className:"absolute -bottom-1 -right-1 text-lg",children:o.icon})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-ink-900 truncate",children:e.userName}),r&&s.jsx(a,{variant:"eco",className:"text-xs",children:"我"})]}),s.jsx("div",{className:"text-sm text-ink-500",children:o.name})]}),s.jsx("div",{className:"w-8 flex-shrink-0 text-center",children:s.jsx(y,{trend:e.trend,value:e.trendValue})}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-bold text-eco-600",children:(()=>{switch(t){case"points":return e.points;case"carbon":return`${(e.carbonSaved/1e3).toFixed(1)}kg`;case"experiences":return e.experiencesCompleted;case"shares":return e.sharesCount}})()}),s.jsx("div",{className:"text-xs text-ink-400",children:k[t].label})]})]})}function A({className:a="",compact:n=!1}){const[c,l]=e.useState("weekly"),[d,m]=e.useState("points"),{user:p}=o(),{totalPoints:u}=t(),{totalCarbonSaved:h}=r(),b=e.useMemo(()=>{const e=[...g];return e.sort((e,s)=>{switch(d){case"points":return s.points-e.points;case"carbon":return s.carbonSaved-e.carbonSaved;case"experiences":return s.experiencesCompleted-e.experiencesCompleted;case"shares":return s.sharesCount-e.sharesCount}}),e.map((e,s)=>({...e,rank:s+1}))},[d]),v=e.useMemo(()=>p?{rank:15,userId:p.id,userName:p.nickname||p.name,userAvatar:p.avatar,ecoLevel:"sprout",points:u,carbonSaved:h,experiencesCompleted:8,sharesCount:12,trend:"up",trendValue:3}:null,[p,u,h]),j=n?b.slice(0,5):b;return s.jsxs("div",{className:`${a}`,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl flex items-center justify-center",children:s.jsx(i,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-ink-900",children:"生态排行榜"}),s.jsx("p",{className:"text-sm text-ink-500",children:"与其他生态守护者一起竞争"})]})]}),!n&&s.jsx("div",{className:"flex gap-2",children:s.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:Object.keys(w).map(e=>s.jsx("button",{onClick:()=>l(e),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-colors "+(c===e?"bg-white text-eco-600 shadow-sm":"text-ink-500 hover:text-ink-700"),children:w[e]},e))})})]}),!n&&s.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:Object.keys(k).map(e=>{const{label:a,icon:t}=k[e];return s.jsxs("button",{onClick:()=>m(e),className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors "+(d===e?"bg-eco-500 text-white":"bg-eco-50 text-eco-700 hover:bg-eco-100"),children:[s.jsx(t,{className:"w-4 h-4"}),a]},e)})}),s.jsx("div",{className:"space-y-2",children:s.jsx(x,{mode:"popLayout",children:j.map((e,a)=>s.jsx(S,{entry:e,metric:d,isCurrentUser:(null==p?void 0:p.id)===e.userId},e.userId))})}),v&&v.rank>10&&!n&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[s.jsx("div",{className:"text-sm text-ink-500 mb-2",children:"我的排名"}),s.jsx(S,{entry:v,metric:d,isCurrentUser:!0})]}),n&&s.jsx("div",{className:"mt-4 text-center",children:s.jsx("a",{href:"/leaderboard",className:"text-sm text-eco-600 hover:text-eco-700 font-medium",children:"查看完整排行榜 →"})})]})}function L(){return s.jsx("div",{className:"min-h-screen pt-20 pb-12 bg-gradient-to-b from-amber-50 to-white",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-full mb-4",children:[s.jsx(i,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"生态排行榜"})]}),s.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-ink-900 mb-3",children:["与",s.jsx("span",{className:"text-eco-600",children:"生态守护者"}),"一起竞争"]}),s.jsx("p",{className:"text-ink-500 max-w-2xl mx-auto",children:"通过学习、体验、分享积累绿色积分，成为生态文明的先锋"})]}),s.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-3 gap-4 mb-8",children:[s.jsxs(f,{className:"p-4 text-center bg-gradient-to-br from-eco-50 to-bamboo-50",children:[s.jsx(j,{className:"w-6 h-6 mx-auto text-eco-600 mb-2"}),s.jsx("div",{className:"text-2xl font-bold text-ink-900",children:"1,234"}),s.jsx("div",{className:"text-sm text-ink-500",children:"参与用户"})]}),s.jsxs(f,{className:"p-4 text-center bg-gradient-to-br from-amber-50 to-orange-50",children:[s.jsx(N,{className:"w-6 h-6 mx-auto text-amber-600 mb-2"}),s.jsx("div",{className:"text-2xl font-bold text-ink-900",children:"45.6kg"}),s.jsx("div",{className:"text-sm text-ink-500",children:"本周碳减排"})]}),s.jsxs(f,{className:"p-4 text-center bg-gradient-to-br from-purple-50 to-pink-50",children:[s.jsx(l,{className:"w-6 h-6 mx-auto text-purple-600 mb-2"}),s.jsx("div",{className:"text-2xl font-bold text-ink-900",children:"328"}),s.jsx("div",{className:"text-sm text-ink-500",children:"成就解锁"})]})]}),s.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:s.jsx(f,{className:"p-6",children:s.jsx(A,{})})})]})})}export{L as default};
