import{r as e,j as s,C as t,P as i,O as a,E as n,M as r,F as o,u as l,T as c,H as x}from"./three-vendor-BoyHWg1a.js";import{L as h}from"./core-vendor-Csnc5NqJ.js";import{p as d,V as m,ay as p,s as u,A as b,m as j,X as g,ao as f}from"./ui-vendor-BCOa7pYq.js";const w=[{id:"bamboo",name:"安溪藤铁工艺",description:"福建省安溪县传统手工艺，将藤条与铁丝巧妙结合编织成精美工艺品。",image:"https://images.unsplash.com/photo-1595513046791-c87a6f0c3947?w=800",position:[-4,1.5,-3],rotation:[0,.3,0],link:"/experience/bamboo-weaving"},{id:"paper",name:"中国剪纸艺术",description:"拥有1500多年历史的民间艺术，2009年入选世界非遗名录。",image:"https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=800",position:[0,1.5,-4],rotation:[0,0,0],link:"/experience/paper-cutting"},{id:"terrace",name:"哈尼梯田",description:"云南红河哈尼族1300年农耕智慧结晶，2013年列入世界文化遗产。",image:"https://images.unsplash.com/photo-1605000797499-95a51c5269ae?w=800",position:[4,1.5,-3],rotation:[0,-.3,0],link:"/experience/hani-terrace"}];function v({exhibit:t,isActive:i,onClick:a}){const n=e.useRef(null),[r,o]=e.useState(!1);return l(e=>{n.current&&(n.current.position.y=t.position[1]+.05*Math.sin(e.clock.elapsedTime+t.position[0]))}),s.jsxs("group",{position:t.position,rotation:t.rotation,children:[s.jsxs("mesh",{ref:n,onClick:a,onPointerOver:()=>o(!0),onPointerOut:()=>o(!1),children:[s.jsx("boxGeometry",{args:[2.2,1.5,.1]}),s.jsx("meshStandardMaterial",{color:i?"#D97706":r?"#92400E":"#1C1917",metalness:.8,roughness:.2})]}),s.jsxs("mesh",{position:[0,0,.06],children:[s.jsx("planeGeometry",{args:[2,1.3]}),s.jsx("meshBasicMaterial",{color:"#374151"})]}),(r||i)&&s.jsxs("mesh",{position:[0,0,.05],children:[s.jsx("ringGeometry",{args:[1.12,1.15,4]}),s.jsx("meshBasicMaterial",{color:"#F59E0B",transparent:!0,opacity:.6})]}),s.jsx(c,{position:[0,-1,.1],fontSize:.15,color:i?"#F59E0B":"#FFFFFF",anchorX:"center",anchorY:"middle",font:"/fonts/noto-sans-sc.woff",children:t.name}),r&&s.jsx(x,{position:[0,.9,.2],center:!0,children:s.jsx("div",{className:"bg-black/80 backdrop-blur px-3 py-1 rounded-full text-white text-xs whitespace-nowrap",children:"点击查看详情"})})]})}function k(){return s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.5,0],receiveShadow:!0,children:[s.jsx("planeGeometry",{args:[30,30]}),s.jsx(r,{blur:[300,100],resolution:1024,mixBlur:1,mixStrength:40,roughness:1,depthScale:1.2,minDepthThreshold:.4,maxDepthThreshold:1.4,color:"#050505",metalness:.5,mirror:.5})]})}function N(){return s.jsxs(s.Fragment,{children:[s.jsx("ambientLight",{intensity:.3}),s.jsx("spotLight",{position:[0,10,0],angle:.5,penumbra:1,intensity:1,castShadow:!0}),s.jsx("pointLight",{position:[-5,5,-5],intensity:.5,color:"#F59E0B"}),s.jsx("pointLight",{position:[5,5,-5],intensity:.5,color:"#3B82F6"})]})}function y(){return s.jsx(s.Fragment,{children:[[-6,0,-6],[6,0,-6],[-6,0,2],[6,0,2]].map((e,t)=>s.jsxs("mesh",{position:e,children:[s.jsx("cylinderGeometry",{args:[.3,.3,4,32]}),s.jsx("meshStandardMaterial",{color:"#1C1917",metalness:.9,roughness:.1})]},t))})}function F(){return s.jsx(s.Fragment,{children:Array.from({length:10}).map((e,t)=>s.jsx(o,{speed:1+Math.random(),rotationIntensity:.5,floatIntensity:.5,position:[12*(Math.random()-.5),2+2*Math.random(),8*(Math.random()-.5)-2],children:s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[.05+.1*Math.random(),16,16]}),s.jsx("meshStandardMaterial",{color:["#F59E0B","#3B82F6","#10B981","#EC4899"][t%4],emissive:["#F59E0B","#3B82F6","#10B981","#EC4899"][t%4],emissiveIntensity:.5})]})},t))})}function M({activeExhibit:e,onExhibitClick:t}){return s.jsxs(s.Fragment,{children:[s.jsx(i,{makeDefault:!0,position:[0,2,6],fov:60}),s.jsx(a,{enablePan:!1,minDistance:3,maxDistance:10,minPolarAngle:Math.PI/4,maxPolarAngle:Math.PI/2.2,target:[0,1,-2]}),s.jsx(N,{}),s.jsx(k,{}),s.jsx(y,{}),s.jsx(F,{}),w.map(i=>s.jsx(v,{exhibit:i,isActive:e===i.id,onClick:()=>t(i.id)},i.id)),s.jsx(n,{preset:"night"})]})}function B(){return s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-ink-950",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-heritage-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-white text-lg",children:"正在加载虚拟展厅..."})]})})}function E(){const[i,a]=e.useState(null),[n,r]=e.useState(!1),o=w.find(e=>e.id===i);return s.jsxs("div",{className:"fixed inset-0 bg-ink-950",children:[s.jsx(e.Suspense,{fallback:s.jsx(B,{}),children:s.jsx(t,{shadows:!0,dpr:[1,2],children:s.jsx(M,{activeExhibit:i,onExhibitClick:a})})}),s.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex items-center justify-between z-10",children:[s.jsxs(h,{to:"/",className:"flex items-center gap-2 px-4 py-2 bg-black/50 backdrop-blur rounded-full text-white hover:bg-black/70 transition-colors",children:[s.jsx(d,{className:"w-5 h-5"}),"返回首页"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"p-2 bg-black/50 backdrop-blur rounded-full text-white hover:bg-black/70 transition-colors",children:s.jsx(m,{className:"w-5 h-5"})}),s.jsx("button",{className:"p-2 bg-black/50 backdrop-blur rounded-full text-white hover:bg-black/70 transition-colors",children:s.jsx(p,{className:"w-5 h-5"})}),s.jsx("button",{className:"p-2 bg-black/50 backdrop-blur rounded-full text-white hover:bg-black/70 transition-colors",children:s.jsx(u,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 z-10",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-center gap-4 mb-4",children:w.map(e=>s.jsx("button",{onClick:()=>a(e.id),className:`\n                  px-4 py-2 rounded-full text-sm font-medium transition-all\n                  ${i===e.id?"bg-heritage-500 text-white scale-105":"bg-black/50 text-white/70 hover:bg-black/70 hover:text-white"}\n                `,children:e.name},e.id))}),s.jsx("p",{className:"text-center text-white/50 text-sm",children:"拖动鼠标旋转视角 · 滚轮缩放 · 点击展品查看详情"})]})}),s.jsx(b,{children:o&&s.jsxs(j.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:"absolute top-20 right-4 bottom-20 w-80 bg-black/80 backdrop-blur-xl rounded-2xl p-6 z-10",children:[s.jsx("button",{onClick:()=>a(null),className:"absolute top-4 right-4 p-1 hover:bg-white/10 rounded-full",children:s.jsx(g,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsx("div",{className:"mb-4",children:s.jsx("span",{className:"px-2 py-1 bg-heritage-500/20 text-heritage-400 text-xs rounded-full",children:"国家级非遗"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:o.name}),s.jsx("p",{className:"text-white/70 text-sm leading-relaxed mb-6",children:o.description}),s.jsx("div",{className:"mt-auto",children:s.jsx(h,{to:o.link,className:"block w-full py-3 bg-gradient-to-r from-heritage-500 to-primary-500 text-white text-center rounded-xl font-semibold hover:shadow-lg hover:shadow-heritage-500/25 transition-all",children:"开始互动体验"})})]})]})}),s.jsx("div",{className:"absolute bottom-20 left-4 z-10",children:s.jsxs("div",{className:"bg-black/50 backdrop-blur rounded-xl p-4 max-w-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 text-heritage-400 text-sm mb-2",children:[s.jsx(f,{className:"w-4 h-4"}),"虚拟展厅"]}),s.jsx("p",{className:"text-white/70 text-xs",children:"欢迎来到非遗数字展厅，这里展示了中国珍贵的非物质文化遗产。 点击展品可查看详情并进入互动体验。"})]})})]})}export{E as default};
