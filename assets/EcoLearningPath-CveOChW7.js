import{r as e,j as s}from"./three-vendor-BoyHWg1a.js";import{C as i,a as t}from"./Card-A_2Ty7OA.js";import{B as a}from"./Badge-DTmqmyMd.js";import{u as l,B as n}from"./index-DkRoqGlp.js";import{N as r,L as c,T as o,O as d,m,q as x,t as h,$ as p,aR as u,r as b,A as j,X as g,a6 as f,w as N}from"./ui-vendor-BCOa7pYq.js";import"./core-vendor-Csnc5NqJ.js";const v=[{id:"water-wisdom",category:"water",title:"æ°´å¾ªç¯æ™ºæ…§",subtitle:"å…¥é—¨æ¨¡å—",description:"æ¢ç´¢å¤äººå¦‚ä½•åˆ©ç”¨è‡ªç„¶æ°´å¾ªç¯ï¼Œå®ç°å¯æŒç»­å†œä¸šçŒæº‰ã€‚",icon:r,color:"text-blue-600",bgColor:"bg-blue-50",unlocked:!0,badge:{name:"æ°´å¾ªç¯å®ˆæŠ¤è€…",icon:"ğŸ’§"},lessons:[{id:"water-1",title:"å“ˆå°¼æ¢¯ç”°çš„æ°´ç³»å¥¥ç§˜",description:'äº†è§£"æ£®æ—-æ‘å¯¨-æ¢¯ç”°-æ°´ç³»"å››ç´ åŒæ„ç”Ÿæ€ç³»ç»Ÿ',duration:10,points:20,completed:!1,heritageLink:"/experience/hani-terrace"},{id:"water-2",title:"æœ¨åˆ»åˆ†æ°´çš„å…¬å¹³æ™ºæ…§",description:"å­¦ä¹ ä¼ ç»Ÿæ°´èµ„æºåˆ†é…çš„å…¬å¹³åŸåˆ™",duration:8,points:15,completed:!1},{id:"water-3",title:"èŒ¶å›­çš„æ°´åœŸä¿æŒ",description:"æ¢ç´¢èŒ¶å›­å¦‚ä½•å®ç°æ°´åœŸä¿æŒå’Œç”Ÿæ€å¹³è¡¡",duration:12,points:25,completed:!1,heritageLink:"/experience/tea-ceremony"}]},{id:"sustainable-materials",category:"material",title:"ææ–™å¯æŒç»­",subtitle:"è¿›é˜¶æ¨¡å—",description:"è®¤è¯†ä¼ ç»Ÿå·¥è‰ºä¸­ä½¿ç”¨çš„å¤©ç„¶å¯é™è§£ææ–™åŠå…¶ç¯ä¿ä»·å€¼ã€‚",icon:c,color:"text-eco-600",bgColor:"bg-eco-50",unlocked:!1,requiredModules:["water-wisdom"],badge:{name:"ææ–™ç¯ä¿å®¶",icon:"ğŸŒ¿"},lessons:[{id:"material-1",title:"ä»¥ç«¹ä»£å¡‘çš„æ™ºæ…§",description:"äº†è§£ç«¹ç¼–å¦‚ä½•æ›¿ä»£å¡‘æ–™åˆ¶å“",duration:10,points:20,completed:!1,heritageLink:"/experience/bamboo-weaving"},{id:"material-2",title:"å¤©ç„¶æŸ“æ–™çš„å¥¥ç§˜",description:"æ¢ç´¢èœ¡æŸ“ä¸­æ¤ç‰©æŸ“æ–™çš„ç¯ä¿ç‰¹æ€§",duration:12,points:25,completed:!1,heritageLink:"/experience/batik"},{id:"material-3",title:"æ³¥åœŸçš„ç”Ÿå‘½å¾ªç¯",description:"è®¤è¯†æ³¥å¡‘å¤©ç„¶ææ–™çš„å¯é™è§£ç‰¹æ€§",duration:8,points:15,completed:!1,heritageLink:"/experience/fengxiang-clay"},{id:"material-4",title:"çº¸è‰ºçš„å¯æŒç»­ä¹‹é“",description:"äº†è§£ä¼ ç»Ÿçº¸å¼ çš„ç¯ä¿å±æ€§",duration:10,points:20,completed:!1,heritageLink:"/experience/paper-cutting"}]},{id:"biodiversity",category:"biodiversity",title:"ç”Ÿç‰©å¤šæ ·æ€§",subtitle:"è¿›é˜¶æ¨¡å—",description:"æ¢ç´¢ä¼ ç»Ÿå†œä¸šå¦‚ä½•ç»´æŠ¤ç”Ÿæ€å¹³è¡¡å’Œç”Ÿç‰©å¤šæ ·æ€§ã€‚",icon:o,color:"text-green-600",bgColor:"bg-green-50",unlocked:!1,requiredModules:["water-wisdom"],badge:{name:"ç”Ÿæ€å®ˆæŠ¤è€…",icon:"ğŸŒ³"},lessons:[{id:"bio-1",title:"æ¢¯ç”°ç”Ÿæ€ç³»ç»Ÿ",description:"äº†è§£æ¢¯ç”°å¦‚ä½•æˆä¸ºç”Ÿç‰©å¤šæ ·æ€§çš„å®¶å›­",duration:15,points:30,completed:!1,heritageLink:"/experience/hani-terrace"},{id:"bio-2",title:"èŒ¶å›­çš„ç”Ÿæ€å¹³è¡¡",description:"æ¢ç´¢æœ‰æœºèŒ¶å›­çš„è‡ªç„¶å®³è™«æ§åˆ¶",duration:12,points:25,completed:!1,heritageLink:"/experience/tea-ceremony"},{id:"bio-3",title:"ç«¹æ—çš„ç¢³æ±‡åŠŸèƒ½",description:"è®¤è¯†ç«¹æ—åœ¨ç¢³å¾ªç¯ä¸­çš„é‡è¦ä½œç”¨",duration:10,points:20,completed:!1}]},{id:"carbon-neutral",category:"carbon",title:"ç¢³ä¸­å’Œå®è·µ",subtitle:"ä¸“å®¶æ¨¡å—",description:"å­¦ä¹ å¦‚ä½•åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­è·µè¡Œä½ç¢³ç†å¿µï¼Œå®ç°ç¢³ä¸­å’Œç›®æ ‡ã€‚",icon:d,color:"text-carbon-600",bgColor:"bg-carbon-50",unlocked:!1,requiredModules:["sustainable-materials","biodiversity"],badge:{name:"ç¢³ä¸­å’Œå…ˆé”‹",icon:"ğŸŒ"},lessons:[{id:"carbon-1",title:"ä½ç¢³äº‘æ¸¸çš„ä»·å€¼",description:"äº†è§£æ•°å­—æ—…æ¸¸å¦‚ä½•å‡å°‘ç¢³æ’æ”¾",duration:10,points:20,completed:!1},{id:"carbon-2",title:"å¾ªç¯ç»æµçš„æ™ºæ…§",description:'å­¦ä¹ çš®å½±æˆä¸­"ç‰©å°½å…¶ç”¨"çš„ç†å¿µ',duration:12,points:25,completed:!1,heritageLink:"/experience/shadow-puppet"},{id:"carbon-3",title:"ç»¿è‰²æ¶ˆè´¹æŒ‡å—",description:"æŒæ¡é€‰æ‹©ç”Ÿæ€äº§å“çš„æ–¹æ³•",duration:15,points:30,completed:!1,heritageLink:"/marketplace"},{id:"carbon-4",title:"ä¸ªäººç¢³è¶³è¿¹ç®¡ç†",description:"å­¦ä¹ è¿½è¸ªå’Œå‡å°‘ä¸ªäººç¢³æ’æ”¾",duration:12,points:25,completed:!1}]}],y={beginner:{name:"å…¥é—¨",color:"text-eco-600 bg-eco-100",modules:["water-wisdom"]},intermediate:{name:"è¿›é˜¶",color:"text-amber-600 bg-amber-100",modules:["sustainable-materials","biodiversity"]},expert:{name:"ä¸“å®¶",color:"text-heritage-600 bg-heritage-100",modules:["carbon-neutral"]}};function w({className:r="",onModuleComplete:c}){const[o,d]=e.useState(v),[w,k]=e.useState(null),[C,$]=e.useState(null),{addPoints:L,totalPoints:M}=l(),q=e.useMemo(()=>{const e=o.reduce((e,s)=>e+s.lessons.length,0),s=o.reduce((e,s)=>e+s.lessons.filter(e=>e.completed).length,0);return e>0?Math.round(s/e*100):0},[o]),B=e=>!!e.unlocked||(!e.requiredModules||e.requiredModules.every(e=>{const s=o.find(s=>s.id===e);return s&&s.lessons.every(e=>e.completed)})),T=e=>{const s=e.lessons.filter(e=>e.completed).length;return e.lessons.length>0?Math.round(s/e.lessons.length*100):0},z=o.every(e=>e.lessons.every(e=>e.completed));return s.jsxs("div",{className:`${r}`,children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-ink-900",children:"ç”Ÿæ€å­¦ä¹ è·¯å¾„"}),s.jsx("p",{className:"text-ink-500",children:"å¾ªåºæ¸è¿›ï¼ŒæŒæ¡å®Œæ•´çš„ç¯ä¿çŸ¥è¯†ä½“ç³»"})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-3xl font-bold text-eco-600",children:[q,"%"]}),s.jsx("div",{className:"text-sm text-ink-500",children:"æ€»ä½“è¿›åº¦"})]})]}),s.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:s.jsx(m.div,{initial:{width:0},animate:{width:`${q}%`},transition:{duration:.5},className:"h-full bg-gradient-to-r from-eco-500 via-bamboo-500 to-heritage-500"})}),z&&s.jsx(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 p-4 bg-gradient-to-r from-eco-50 to-bamboo-50 rounded-xl border border-eco-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-eco-500 rounded-full flex items-center justify-center text-2xl",children:"ğŸ†"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-eco-800",children:'æ­å–œï¼ä½ å·²æˆä¸º"ç”Ÿæ€æ™ºæ…§å¤§å¸ˆ"'}),s.jsx("div",{className:"text-sm text-eco-600",children:"å®Œæˆæ‰€æœ‰å­¦ä¹ è·¯å¾„ï¼Œè·å¾—ä¸“å±ç§°å·å’Œçºªå¿µNFT"})]})]})})]}),s.jsx("div",{className:"flex gap-4 mb-6",children:Object.entries(y).map(([e,i])=>s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i.color}`,children:i.name})},e))}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map((e,l)=>{const n=e.icon,r=T(e),c=e.unlocked||B(e),d=(e=>{for(const[s,i]of Object.entries(y))if(i.modules.includes(e))return s;return"beginner"})(e.id),j=y[d];return s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*l},children:s.jsx(i,{className:`cursor-pointer transition-all hover:shadow-lg ${c?"border-eco-200 hover:border-eco-400":"opacity-60 border-gray-200"} ${100===r?"ring-2 ring-eco-500 ring-offset-2":""}`,onClick:()=>c&&k(e),children:s.jsxs(t,{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:`w-14 h-14 rounded-xl ${e.bgColor} flex items-center justify-center`,children:c?s.jsx(n,{className:`w-7 h-7 ${e.color}`}):s.jsx(x,{className:"w-7 h-7 text-gray-400"})}),s.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.jsx(a,{className:j.color,children:j.name}),100===r&&s.jsxs(a,{variant:"eco",className:"flex items-center gap-1",children:[s.jsx(h,{className:"w-3 h-3"}),"å·²å®Œæˆ"]})]})]}),s.jsx("h3",{className:"text-lg font-bold text-ink-900 mb-1",children:e.title}),s.jsx("p",{className:"text-sm text-ink-500 mb-4 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-ink-500 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(p,{className:"w-4 h-4"}),s.jsxs("span",{children:[e.lessons.length," è¯¾ç¨‹"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(u,{className:"w-4 h-4"}),s.jsxs("span",{children:[e.lessons.reduce((e,s)=>e+s.duration,0)," åˆ†é’Ÿ"]})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{className:"text-ink-500",children:"å­¦ä¹ è¿›åº¦"}),s.jsxs("span",{className:e.color,children:[r,"%"]})]}),s.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx(m.div,{initial:{width:0},animate:{width:`${r}%`},className:`h-full ${e.bgColor.replace("bg-","bg-").replace("-50","-500")}`,style:{background:r>0?`linear-gradient(90deg, ${e.color.includes("blue")?"#3b82f6":e.color.includes("eco")?"#22c55e":e.color.includes("green")?"#16a34a":"#64748b"} 0%, ${e.color.includes("blue")?"#60a5fa":e.color.includes("eco")?"#4ade80":e.color.includes("green")?"#22c55e":"#94a3b8"} 100%)`:void 0}})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-lg",children:e.badge.icon}),s.jsx("span",{className:100===r?"text-eco-600 font-medium":"text-ink-400",children:e.badge.name})]}),c&&s.jsx(b,{className:`w-5 h-5 ${e.color}`})]}),!c&&e.requiredModules&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:s.jsxs("p",{className:"text-xs text-ink-400",children:["éœ€å…ˆå®Œæˆ: ",e.requiredModules.map(e=>{var s;return null==(s=o.find(s=>s.id===e))?void 0:s.title}).join("ã€")]})})]})})},e.id)})}),s.jsx(j,{children:w&&s.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>k(null),children:s.jsxs(m.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:`${w.bgColor} p-6 rounded-t-2xl`,children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-white rounded-xl flex items-center justify-center shadow-lg",children:s.jsx(w.icon,{className:`w-8 h-8 ${w.color}`})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-ink-900",children:w.title}),s.jsx("p",{className:"text-ink-600",children:w.subtitle})]})]}),s.jsx("button",{onClick:()=>k(null),className:"w-8 h-8 bg-white/50 rounded-full flex items-center justify-center hover:bg-white/80",children:s.jsx(g,{className:"w-5 h-5 text-ink-600"})})]}),s.jsx("p",{className:"mt-4 text-ink-600",children:w.description})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"font-bold text-ink-900 mb-4",children:"è¯¾ç¨‹åˆ—è¡¨"}),s.jsx("div",{className:"space-y-3",children:w.lessons.map((e,i)=>s.jsx(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*i},className:"p-4 rounded-xl border transition-all "+(e.completed?"bg-eco-50 border-eco-200":"bg-white border-gray-200 hover:border-eco-300 hover:shadow-sm"),children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 "+(e.completed?"bg-eco-500 text-white":"bg-gray-100 text-gray-400"),children:e.completed?s.jsx(h,{className:"w-5 h-5"}):s.jsx("span",{className:"font-bold",children:i+1})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-ink-900",children:e.title}),s.jsx("p",{className:"text-sm text-ink-500 mt-1",children:e.description}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-ink-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(u,{className:"w-3 h-3"}),e.duration," åˆ†é’Ÿ"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(f,{className:"w-3 h-3"}),"+",e.points," ç§¯åˆ†"]})]})]}),s.jsx("div",{className:"flex-shrink-0",children:e.completed?s.jsx(a,{variant:"eco",children:"å·²å®Œæˆ"}):s.jsxs(n,{size:"sm",variant:"eco",onClick:()=>{$(e),setTimeout(()=>{var s,i;s=w.id,i=e.id,d(e=>e.map(e=>{if(e.id!==s)return e;const t=e.lessons.map(e=>e.id!==i||e.completed?e:(L({type:"learn",points:e.points,description:`å®Œæˆè¯¾ç¨‹: ${e.title}`,relatedId:i}),{...e,completed:!0}));return{...e,lessons:t}})),setTimeout(()=>{const e=o.find(e=>e.id===s);e&&e.lessons.every(e=>e.id===i||e.completed)&&c&&c(s),d(e=>e.map(e=>({...e,unlocked:B(e)})))},100),$(null)},1e3)},className:"flex items-center gap-1",children:[s.jsx(N,{className:"w-4 h-4"}),"å¼€å§‹"]})})]})},e.id))}),s.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-eco-50 to-bamboo-50 rounded-xl",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"text-4xl",children:w.badge.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-ink-900",children:w.badge.name}),s.jsx("div",{className:"text-sm text-ink-500",children:100===T(w)?"ğŸ‰ å·²è·å¾—æ­¤å¾½ç« ï¼":"å®Œæˆæ‰€æœ‰è¯¾ç¨‹åè·å¾—æ­¤å¾½ç« "})]})]})})]})]})})}),s.jsx(j,{children:C&&s.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-[60] flex items-center justify-center",children:s.jsxs(m.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"bg-white rounded-2xl p-8 text-center max-w-sm",children:[s.jsx("div",{className:"w-16 h-16 bg-eco-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(p,{className:"w-8 h-8 text-eco-600 animate-pulse"})}),s.jsx("h3",{className:"text-xl font-bold text-ink-900 mb-2",children:"å­¦ä¹ ä¸­..."}),s.jsx("p",{className:"text-ink-500 mb-4",children:C.title}),s.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx(m.div,{initial:{width:0},animate:{width:"100%"},transition:{duration:1},className:"h-full bg-eco-500"})})]})})})]})}export{w as default};
