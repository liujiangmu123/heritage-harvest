import{r as e,j as s}from"./three-vendor-BoyHWg1a.js";import{L as a}from"./core-vendor-Csnc5NqJ.js";import{f as l,B as i}from"./index-D20SIRsj.js";import{C as t,a as r}from"./Card-CzLHjEZJ.js";import{B as n}from"./Badge-CFxPFb1t.js";import{p as c,h as o}from"./mockData-DCdIpQra.js";import{m as d,g as x,_ as m,X as h,a9 as p,aa as u,ab as b,ac as j,c as g,a6 as v}from"./ui-vendor-BCOa7pYq.js";const f=[{value:"all",label:"全部"},{value:"tea",label:"茶叶"},{value:"rice",label:"大米"},{value:"textile",label:"纺织品"},{value:"bamboo",label:"竹制品"},{value:"food",label:"食品"},{value:"craft",label:"手工艺品"}],N=[{value:"default",label:"默认排序"},{value:"price-asc",label:"价格从低到高"},{value:"price-desc",label:"价格从高到低"},{value:"sales",label:"销量优先"},{value:"rating",label:"评分优先"}];function k(){const[k,y]=e.useState(""),[w,C]=e.useState("all"),[S,z]=e.useState("all"),[L,B]=e.useState("default"),[P,D]=e.useState("grid"),[R,V]=e.useState(!1),E=e.useMemo(()=>{let e=[...c];if(k){const s=k.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||e.heritage.name.toLowerCase().includes(s))}switch("all"!==w&&(e=e.filter(e=>e.category===w)),"all"!==S&&(e=e.filter(e=>e.heritage.id===S)),L){case"price-asc":e.sort((e,s)=>e.price-s.price);break;case"price-desc":e.sort((e,s)=>s.price-e.price);break;case"sales":e.sort((e,s)=>s.sales-e.sales);break;case"rating":e.sort((e,s)=>s.rating-e.rating)}return e},[k,w,S,L]);return s.jsxs("div",{className:"min-h-screen pt-20",children:[s.jsx("div",{className:"bg-gradient-to-br from-primary-50 via-white to-heritage-50 py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[s.jsxs(n,{variant:"heritage",className:"mb-4",children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"臻选好物"]}),s.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-ink-900 mb-4",children:"非遗文化 · 匠心之选"}),s.jsx("p",{className:"text-ink-500 max-w-2xl mx-auto",children:"每一件产品都承载着传承人的匠心与故事，扫码即可开启沉浸式VR体验"})]}),s.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mt-8 max-w-2xl mx-auto",children:s.jsxs("div",{className:"relative",children:[s.jsx(m,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-ink-400"}),s.jsx("input",{type:"text",placeholder:"搜索非遗好物、传承故事...",value:k,onChange:e=>y(e.target.value),className:"w-full h-14 pl-12 pr-4 rounded-2xl border border-ink-200 bg-white shadow-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 outline-none transition-all"}),k&&s.jsx("button",{onClick:()=>y(""),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-ink-100",children:s.jsx(h,{className:"w-4 h-4 text-ink-400"})})]})})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[s.jsx("aside",{className:"hidden lg:block w-64 flex-shrink-0",children:s.jsxs("div",{className:"sticky top-24 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-card",children:[s.jsx("h3",{className:"font-bold text-ink-900 mb-4",children:"商品分类"}),s.jsx("div",{className:"space-y-2",children:f.map(e=>s.jsx("button",{onClick:()=>C(e.value),className:"w-full text-left px-4 py-2 rounded-xl transition-colors "+(w===e.value?"bg-primary-100 text-primary-700 font-medium":"text-ink-600 hover:bg-ink-50"),children:e.label},e.value))})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-card",children:[s.jsx("h3",{className:"font-bold text-ink-900 mb-4",children:"关联非遗"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>z("all"),className:"w-full text-left px-4 py-2 rounded-xl transition-colors "+("all"===S?"bg-heritage-100 text-heritage-700 font-medium":"text-ink-600 hover:bg-ink-50"),children:"全部非遗"}),o.map(e=>s.jsx("button",{onClick:()=>z(e.id),className:"w-full text-left px-4 py-2 rounded-xl transition-colors "+(S===e.id?"bg-heritage-100 text-heritage-700 font-medium":"text-ink-600 hover:bg-ink-50"),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n,{variant:"national"===e.level?"national":"provincial",size:"sm",children:"national"===e.level?"国":"省"}),s.jsx("span",{className:"truncate",children:e.name})]})},e.id))]})]})]})}),s.jsxs("main",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>V(!0),className:"lg:hidden flex items-center gap-2 px-4 py-2 rounded-xl border border-ink-200 text-ink-600 hover:bg-ink-50",children:[s.jsx(p,{className:"w-4 h-4"}),"筛选"]}),s.jsxs("p",{className:"text-ink-500",children:["共 ",s.jsx("span",{className:"font-bold text-ink-900",children:E.length})," 件商品"]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:L,onChange:e=>B(e.target.value),className:"appearance-none bg-white border border-ink-200 rounded-xl px-4 py-2 pr-10 text-ink-600 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 outline-none",children:N.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))}),s.jsx(u,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-ink-400 pointer-events-none"})]}),s.jsxs("div",{className:"hidden sm:flex items-center border border-ink-200 rounded-xl overflow-hidden",children:[s.jsx("button",{onClick:()=>D("grid"),className:"p-2 "+("grid"===P?"bg-primary-100 text-primary-600":"text-ink-400 hover:bg-ink-50"),children:s.jsx(b,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>D("list"),className:"p-2 "+("list"===P?"bg-primary-100 text-primary-600":"text-ink-400 hover:bg-ink-50"),children:s.jsx(j,{className:"w-5 h-5"})})]})]})]}),E.length>0?s.jsx("div",{className:"grid gap-6 "+("grid"===P?"sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:E.map((e,i)=>s.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*i},children:s.jsx(a,{to:`/products/${e.id}`,children:s.jsxs(t,{variant:"heritage",className:"group overflow-hidden "+("list"===P?"flex":""),children:[s.jsxs("div",{className:"relative overflow-hidden "+("list"===P?"w-48 flex-shrink-0":"h-64"),children:[s.jsx("img",{src:e.images[0],alt:e.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),s.jsx("div",{className:"absolute top-3 left-3 flex gap-2",children:s.jsxs(n,{variant:"national",size:"sm",children:["national"===e.heritage.level?"国家级":"省级","非遗"]})}),e.vrExperienceId&&s.jsx("div",{className:"absolute top-3 right-3",children:s.jsxs(n,{variant:"heritage",size:"sm",children:[s.jsx(x,{className:"w-3 h-3 mr-1"}),"VR"]})}),e.originalPrice&&s.jsx("div",{className:"absolute bottom-3 left-3",children:s.jsxs(n,{variant:"danger",size:"sm",children:["省 ¥",e.originalPrice-e.price]})})]}),s.jsxs(r,{className:"p-5 "+("list"===P?"flex-1":""),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(g,{className:"w-4 h-4 text-ink-400"}),s.jsx("span",{className:"text-sm text-ink-400",children:e.origin})]}),s.jsx("h3",{className:"font-bold text-ink-900 mb-2 line-clamp-2 group-hover:text-primary-600 transition-colors",children:e.name}),s.jsx("p",{className:"text-sm text-ink-500 line-clamp-2 mb-4",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xl font-bold text-primary-600",children:l(e.price)}),e.originalPrice&&s.jsx("span",{className:"text-sm text-ink-400 line-through ml-2",children:l(e.originalPrice)})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-ink-400",children:[s.jsx(v,{className:"w-4 h-4 text-heritage-500 fill-heritage-500"}),e.rating,s.jsx("span",{className:"mx-1",children:"·"}),e.sales,"人购买"]})]})]})]})})},e.id))}):s.jsxs("div",{className:"text-center py-20",children:[s.jsx("div",{className:"w-24 h-24 mx-auto rounded-full bg-ink-100 flex items-center justify-center mb-4",children:s.jsx(m,{className:"w-10 h-10 text-ink-300"})}),s.jsx("p",{className:"text-ink-500 mb-2",children:"未找到相关商品"}),s.jsx("p",{className:"text-sm text-ink-400",children:"尝试调整筛选条件或搜索关键词"})]})]})]})}),R&&s.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 lg:hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>V(!1)}),s.jsx(d.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},className:"absolute left-0 top-0 bottom-0 w-80 bg-white shadow-xl overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-bold",children:"筛选"}),s.jsx("button",{onClick:()=>V(!1),className:"p-2 rounded-lg hover:bg-ink-100",children:s.jsx(h,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-bold text-ink-900 mb-4",children:"商品分类"}),s.jsx("div",{className:"space-y-2",children:f.map(e=>s.jsx("button",{onClick:()=>{C(e.value),V(!1)},className:"w-full text-left px-4 py-2 rounded-xl transition-colors "+(w===e.value?"bg-primary-100 text-primary-700 font-medium":"text-ink-600 hover:bg-ink-50"),children:e.label},e.value))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-bold text-ink-900 mb-4",children:"关联非遗"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>{z("all"),V(!1)},className:"w-full text-left px-4 py-2 rounded-xl transition-colors "+("all"===S?"bg-heritage-100 text-heritage-700 font-medium":"text-ink-600 hover:bg-ink-50"),children:"全部非遗"}),o.map(e=>s.jsx("button",{onClick:()=>{z(e.id),V(!1)},className:"w-full text-left px-4 py-2 rounded-xl transition-colors "+(S===e.id?"bg-heritage-100 text-heritage-700 font-medium":"text-ink-600 hover:bg-ink-50"),children:e.name},e.id))]})]}),s.jsx(i,{variant:"heritage",className:"w-full",onClick:()=>V(!1),children:"确认筛选"})]})})]})]})}export{k as default};
