import{i as _e,r as M,j as h,L as yn,V as gn,m as yt,A as Ne}from"./index-CIFreg_9.js";import{a as xn}from"./camera_utils-BrV3Ya08.js";import{C as wn}from"./chevron-left-WqSXtkcp.js";import{V as bn}from"./volume-x-CWT2ok6J.js";import{C as En}from"./camera-CG0fsqJh.js";import{R as jn}from"./rotate-ccw-B2lbR2yx.js";import{P as An}from"./play-PxQ9HxQM.js";import{T as Tn}from"./trophy-r4n8mdlP.js";var _n={};(function(){var T;function U(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var rt=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,r){return t==Array.prototype||t==Object.prototype||(t[e]=r.value),t};function te(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof _e=="object"&&_e];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}var Y=te(this);function _(t,e){if(e)t:{var r=Y;t=t.split(".");for(var n=0;n<t.length-1;n++){var i=t[n];if(!(i in r))break t;r=r[i]}t=t[t.length-1],n=r[t],e=e(n),e!=n&&e!=null&&rt(r,t,{configurable:!0,writable:!0,value:e})}}_("Symbol",function(t){function e(s){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new r(n+(s||"")+"_"+i++,s)}function r(s,o){this.h=s,rt(this,"description",{configurable:!0,writable:!0,value:o})}if(t)return t;r.prototype.toString=function(){return this.h};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return e}),_("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<e.length;r++){var n=Y[e[r]];typeof n=="function"&&typeof n.prototype[t]!="function"&&rt(n.prototype,t,{configurable:!0,writable:!0,value:function(){return Ct(U(this))}})}return t});function Ct(t){return t={next:t},t[Symbol.iterator]=function(){return this},t}function O(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:U(t)}}function gt(t){if(!(t instanceof Array)){t=O(t);for(var e,r=[];!(e=t.next()).done;)r.push(e.value);t=r}return t}var It=typeof Object.assign=="function"?Object.assign:function(t,e){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};_("Object.assign",function(t){return t||It});var Pt=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},ft;if(typeof Object.setPrototypeOf=="function")ft=Object.setPrototypeOf;else{var I;t:{var nt={a:!0},P={};try{P.__proto__=nt,I=P.a;break t}catch{}I=!1}ft=I?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var ht=ft;function pt(t,e){if(t.prototype=Pt(e.prototype),t.prototype.constructor=t,ht)ht(t,e);else for(var r in e)if(r!="prototype")if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,r);n&&Object.defineProperty(t,r,n)}else t[r]=e[r];t.za=e.prototype}function tt(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function K(t){if(t.m)throw new TypeError("Generator is already running");t.m=!0}tt.prototype.u=function(t){this.i=t};function xt(t,e){t.l={ma:e,na:!0},t.h=t.s||t.v}tt.prototype.return=function(t){this.l={return:t},this.h=this.v};function b(t,e,r){return t.h=r,{value:e}}function dt(t){this.h=new tt,this.i=t}function kt(t,e){K(t.h);var r=t.h.j;return r?it(t,"return"in r?r.return:function(n){return{value:n,done:!0}},e,t.h.return):(t.h.return(e),ot(t))}function it(t,e,r,n){try{var i=e.call(t.h.j,r);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.h.m=!1,i;var s=i.value}catch(o){return t.h.j=null,xt(t.h,o),ot(t)}return t.h.j=null,n.call(t.h,s),ot(t)}function ot(t){for(;t.h.h;)try{var e=t.i(t.h);if(e)return t.h.m=!1,{value:e.value,done:!1}}catch(r){t.h.i=void 0,xt(t.h,r)}if(t.h.m=!1,t.h.l){if(e=t.h.l,t.h.l=null,e.na)throw e.ma;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function ee(t){this.next=function(e){return K(t.h),t.h.j?e=it(t,t.h.j.next,e,t.h.u):(t.h.u(e),e=ot(t)),e},this.throw=function(e){return K(t.h),t.h.j?e=it(t,t.h.j.throw,e,t.h.u):(xt(t.h,e),e=ot(t)),e},this.return=function(e){return kt(t,e)},this[Symbol.iterator]=function(){return this}}function re(t){function e(n){return t.next(n)}function r(n){return t.throw(n)}return new Promise(function(n,i){function s(o){o.done?n(o.value):Promise.resolve(o.value).then(e,r).then(s,i)}s(t.next())})}function S(t){return re(new ee(new dt(t)))}_("Promise",function(t){function e(o){this.i=0,this.j=void 0,this.h=[],this.u=!1;var l=this.l();try{o(l.resolve,l.reject)}catch(u){l.reject(u)}}function r(){this.h=null}function n(o){return o instanceof e?o:new e(function(l){l(o)})}if(t)return t;r.prototype.i=function(o){if(this.h==null){this.h=[];var l=this;this.j(function(){l.m()})}this.h.push(o)};var i=Y.setTimeout;r.prototype.j=function(o){i(o,0)},r.prototype.m=function(){for(;this.h&&this.h.length;){var o=this.h;this.h=[];for(var l=0;l<o.length;++l){var u=o[l];o[l]=null;try{u()}catch(a){this.l(a)}}}this.h=null},r.prototype.l=function(o){this.j(function(){throw o})},e.prototype.l=function(){function o(a){return function(c){u||(u=!0,a.call(l,c))}}var l=this,u=!1;return{resolve:o(this.I),reject:o(this.m)}},e.prototype.I=function(o){if(o===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(o instanceof e)this.L(o);else{t:switch(typeof o){case"object":var l=o!=null;break t;case"function":l=!0;break t;default:l=!1}l?this.F(o):this.s(o)}},e.prototype.F=function(o){var l=void 0;try{l=o.then}catch(u){this.m(u);return}typeof l=="function"?this.M(l,o):this.s(o)},e.prototype.m=function(o){this.v(2,o)},e.prototype.s=function(o){this.v(1,o)},e.prototype.v=function(o,l){if(this.i!=0)throw Error("Cannot settle("+o+", "+l+"): Promise already settled in state"+this.i);this.i=o,this.j=l,this.i===2&&this.K(),this.H()},e.prototype.K=function(){var o=this;i(function(){if(o.D()){var l=Y.console;typeof l<"u"&&l.error(o.j)}},1)},e.prototype.D=function(){if(this.u)return!1;var o=Y.CustomEvent,l=Y.Event,u=Y.dispatchEvent;return typeof u>"u"?!0:(typeof o=="function"?o=new o("unhandledrejection",{cancelable:!0}):typeof l=="function"?o=new l("unhandledrejection",{cancelable:!0}):(o=Y.document.createEvent("CustomEvent"),o.initCustomEvent("unhandledrejection",!1,!0,o)),o.promise=this,o.reason=this.j,u(o))},e.prototype.H=function(){if(this.h!=null){for(var o=0;o<this.h.length;++o)s.i(this.h[o]);this.h=null}};var s=new r;return e.prototype.L=function(o){var l=this.l();o.T(l.resolve,l.reject)},e.prototype.M=function(o,l){var u=this.l();try{o.call(l,u.resolve,u.reject)}catch(a){u.reject(a)}},e.prototype.then=function(o,l){function u(p,f){return typeof p=="function"?function(m){try{a(p(m))}catch(y){c(y)}}:f}var a,c,d=new e(function(p,f){a=p,c=f});return this.T(u(o,a),u(l,c)),d},e.prototype.catch=function(o){return this.then(void 0,o)},e.prototype.T=function(o,l){function u(){switch(a.i){case 1:o(a.j);break;case 2:l(a.j);break;default:throw Error("Unexpected state: "+a.i)}}var a=this;this.h==null?s.i(u):this.h.push(u),this.u=!0},e.resolve=n,e.reject=function(o){return new e(function(l,u){u(o)})},e.race=function(o){return new e(function(l,u){for(var a=O(o),c=a.next();!c.done;c=a.next())n(c.value).T(l,u)})},e.all=function(o){var l=O(o),u=l.next();return u.done?n([]):new e(function(a,c){function d(m){return function(y){p[m]=y,f--,f==0&&a(p)}}var p=[],f=0;do p.push(void 0),f++,n(u.value).T(d(p.length-1),c),u=l.next();while(!u.done)})},e});function Ut(t,e){t instanceof String&&(t+="");var r=0,n=!1,i={next:function(){if(!n&&r<t.length){var s=r++;return{value:e(s,t[s]),done:!1}}return n=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}_("Array.prototype.keys",function(t){return t||function(){return Ut(this,function(e){return e})}}),_("Array.prototype.fill",function(t){return t||function(e,r,n){var i=this.length||0;for(0>r&&(r=Math.max(0,i+r)),(n==null||n>i)&&(n=i),n=Number(n),0>n&&(n=Math.max(0,i+n)),r=Number(r||0);r<n;r++)this[r]=e;return this}});function W(t){return t||Array.prototype.fill}_("Int8Array.prototype.fill",W),_("Uint8Array.prototype.fill",W),_("Uint8ClampedArray.prototype.fill",W),_("Int16Array.prototype.fill",W),_("Uint16Array.prototype.fill",W),_("Int32Array.prototype.fill",W),_("Uint32Array.prototype.fill",W),_("Float32Array.prototype.fill",W),_("Float64Array.prototype.fill",W),_("Object.is",function(t){return t||function(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}}),_("Array.prototype.includes",function(t){return t||function(e,r){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(r=r||0,0>r&&(r=Math.max(r+i,0));r<i;r++){var s=n[r];if(s===e||Object.is(s,e))return!0}return!1}}),_("String.prototype.includes",function(t){return t||function(e,r){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(e,r||0)!==-1}});var st=this||self;function x(t,e){t=t.split(".");var r=st;t[0]in r||typeof r.execScript>"u"||r.execScript("var "+t[0]);for(var n;t.length&&(n=t.shift());)t.length||e===void 0?r[n]&&r[n]!==Object.prototype[n]?r=r[n]:r=r[n]={}:r[n]=e}function v(t){var e;t:{if((e=st.navigator)&&(e=e.userAgent))break t;e=""}return e.indexOf(t)!=-1}var w=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var r=t.length,n=Array(r),i=typeof t=="string"?t.split(""):t,s=0;s<r;s++)s in i&&(n[s]=e.call(void 0,i[s],s,t));return n},k={},R=null;function j(t){var e=t.length,r=3*e/4;r%3?r=Math.floor(r):"=.".indexOf(t[e-1])!=-1&&(r="=.".indexOf(t[e-2])!=-1?r-2:r-1);var n=new Uint8Array(r),i=0;return z(t,function(s){n[i++]=s}),i!==r?n.subarray(0,i):n}function z(t,e){function r(u){for(;n<t.length;){var a=t.charAt(n++),c=R[a];if(c!=null)return c;if(!/^[\s\xa0]*$/.test(a))throw Error("Unknown base64 encoding at char: "+a)}return u}Ht();for(var n=0;;){var i=r(-1),s=r(0),o=r(64),l=r(64);if(l===64&&i===-1)break;e(i<<2|s>>4),o!=64&&(e(s<<4&240|o>>2),l!=64&&e(o<<6&192|l))}}function Ht(){if(!R){R={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var n=t.concat(e[r].split(""));k[r]=n;for(var i=0;i<n.length;i++){var s=n[i];R[s]===void 0&&(R[s]=i)}}}}var wt=typeof Uint8Array<"u",Mt=!(v("Trident")||v("MSIE"))&&typeof st.btoa=="function";function bt(t){if(!Mt){var e;e===void 0&&(e=0),Ht(),e=k[e];for(var r=Array(Math.floor(t.length/3)),n=e[64]||"",i=0,s=0;i<t.length-2;i+=3){var o=t[i],l=t[i+1],u=t[i+2],a=e[o>>2];o=e[(o&3)<<4|l>>4],l=e[(l&15)<<2|u>>6],u=e[u&63],r[s++]=a+o+l+u}switch(a=0,u=n,t.length-i){case 2:a=t[i+1],u=e[(a&15)<<2]||n;case 1:t=t[i],r[s]=e[t>>2]+e[(t&3)<<4|a>>4]+u+n}return r.join("")}for(e="";10240<t.length;)e+=String.fromCharCode.apply(null,t.subarray(0,10240)),t=t.subarray(10240);return e+=String.fromCharCode.apply(null,t),btoa(e)}var Et=RegExp("[-_.]","g");function Dt(t){switch(t){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Gt(t){if(!Mt)return j(t);Et.test(t)&&(t=t.replace(Et,Dt)),t=atob(t);for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}var jt;function ne(){return jt||(jt=new Uint8Array(0))}var At={},jr=typeof Uint8Array.prototype.slice=="function",F=0,H=0;function Re(t){var e=0>t;t=Math.abs(t);var r=t>>>0;t=Math.floor((t-r)/4294967296),e&&(r=O(Fe(r,t)),e=r.next().value,t=r.next().value,r=e),F=r>>>0,H=t>>>0}var Ar=typeof BigInt=="function";function Fe(t,e){return e=~e,t?t=~t+1:e+=1,[t,e]}function Se(t,e){this.i=t>>>0,this.h=e>>>0}function Oe(t){if(!t)return Le||(Le=new Se(0,0));if(!/^-?\d+$/.test(t))return null;if(16>t.length)Re(Number(t));else if(Ar)t=BigInt(t),F=Number(t&BigInt(4294967295))>>>0,H=Number(t>>BigInt(32)&BigInt(4294967295));else{var e=+(t[0]==="-");H=F=0;for(var r=t.length,n=e,i=(r-e)%6+e;i<=r;n=i,i+=6)n=Number(t.slice(n,i)),H*=1e6,F=1e6*F+n,4294967296<=F&&(H+=F/4294967296|0,F%=4294967296);e&&(e=O(Fe(F,H)),t=e.next().value,e=e.next().value,F=t,H=e)}return new Se(F,H)}var Le;function Ce(t,e){return Error("Invalid wire type: "+t+" (at position "+e+")")}function ie(){return Error("Failed to read varint, encoding is invalid.")}function Ie(t,e){return Error("Tried to read past the end of the data "+e+" > "+t)}function lt(){throw Error("Invalid UTF8")}function Pe(t,e){return e=String.fromCharCode.apply(null,e),t==null?e:t+e}var Bt=void 0,oe,Tr=typeof TextDecoder<"u",ke,_r=typeof TextEncoder<"u",Ue;function He(t){if(t!==At)throw Error("illegal external caller")}function Tt(t,e){if(He(e),this.V=t,t!=null&&t.length===0)throw Error("ByteString should be constructed with non-empty values")}function se(){return Ue||(Ue=new Tt(null,At))}function Me(t){He(At);var e=t.V;return e=e==null||wt&&e!=null&&e instanceof Uint8Array?e:typeof e=="string"?Gt(e):null,e==null?e:t.V=e}function Nr(t){if(typeof t=="string")return{buffer:Gt(t),C:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),C:!1};if(t.constructor===Uint8Array)return{buffer:t,C:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),C:!1};if(t.constructor===Tt)return{buffer:Me(t)||ne(),C:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function De(t,e){this.i=null,this.m=!1,this.h=this.j=this.l=0,le(this,t,e)}function le(t,e,r){r=r===void 0?{}:r,t.S=r.S===void 0?!1:r.S,e&&(e=Nr(e),t.i=e.buffer,t.m=e.C,t.l=0,t.j=t.i.length,t.h=t.l)}De.prototype.reset=function(){this.h=this.l};function ut(t,e){if(t.h=e,e>t.j)throw Ie(t.j,e)}function _t(t){var e=t.i,r=t.h,n=e[r++],i=n&127;if(n&128&&(n=e[r++],i|=(n&127)<<7,n&128&&(n=e[r++],i|=(n&127)<<14,n&128&&(n=e[r++],i|=(n&127)<<21,n&128&&(n=e[r++],i|=n<<28,n&128&&e[r++]&128&&e[r++]&128&&e[r++]&128&&e[r++]&128&&e[r++]&128)))))throw ie();return ut(t,r),i}function Ge(t,e){if(0>e)throw Error("Tried to read a negative byte length: "+e);var r=t.h,n=r+e;if(n>t.j)throw Ie(e,t.j-r);return t.h=n,r}var Be=[];function ue(){this.h=[]}ue.prototype.length=function(){return this.h.length},ue.prototype.end=function(){var t=this.h;return this.h=[],t};function Ye(t,e,r){for(;0<r||127<e;)t.h.push(e&127|128),e=(e>>>7|r<<25)>>>0,r>>>=7;t.h.push(e)}function at(t,e){for(;127<e;)t.h.push(e&127|128),e>>>=7;t.h.push(e)}function ae(t,e){if(Be.length){var r=Be.pop();le(r,t,e),t=r}else t=new De(t,e);this.h=t,this.j=this.h.h,this.i=this.l=-1,this.setOptions(e)}ae.prototype.setOptions=function(t){t=t===void 0?{}:t,this.ca=t.ca===void 0?!1:t.ca},ae.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function We(t){var e=t.h;if(e.h==e.j)return!1;t.j=t.h.h;var r=_t(t.h)>>>0;if(e=r>>>3,r&=7,!(0<=r&&5>=r))throw Ce(r,t.j);if(1>e)throw Error("Invalid field number: "+e+" (at position "+t.j+")");return t.l=e,t.i=r,!0}function Yt(t){switch(t.i){case 0:if(t.i!=0)Yt(t);else t:{t=t.h;for(var e=t.h,r=e+10,n=t.i;e<r;)if(!(n[e++]&128)){ut(t,e);break t}throw ie()}break;case 1:t=t.h,ut(t,t.h+8);break;case 2:t.i!=2?Yt(t):(e=_t(t.h)>>>0,t=t.h,ut(t,t.h+e));break;case 5:t=t.h,ut(t,t.h+4);break;case 3:e=t.l;do{if(!We(t))throw Error("Unmatched start-group tag: stream EOF");if(t.i==4){if(t.l!=e)throw Error("Unmatched end-group tag");break}Yt(t)}while(!0);break;default:throw Ce(t.i,t.j)}}var Wt=[];function Rr(){this.j=[],this.i=0,this.h=new ue}function mt(t,e){e.length!==0&&(t.j.push(e),t.i+=e.length)}function Fr(t,e){if(e=e.R){mt(t,t.h.end());for(var r=0;r<e.length;r++)mt(t,Me(e[r])||ne())}}var q=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function ct(t,e){return q?t[q]|=e:t.A!==void 0?t.A|=e:(Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}}),e)}function Xe(t,e){q?t[q]&&(t[q]&=~e):t.A!==void 0&&(t.A&=~e)}function N(t){var e;return q?e=t[q]:e=t.A,e??0}function $(t,e){q?t[q]=e:t.A!==void 0?t.A=e:Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}})}function ce(t){return ct(t,1),t}function Sr(t,e){$(e,(t|0)&-51)}function Xt(t,e){$(e,(t|18)&-41)}var fe={};function Vt(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)&&t.constructor===Object}var Nt,Ve=[];$(Ve,23),Nt=Object.freeze(Ve);function he(t){if(N(t.o)&2)throw Error("Cannot mutate an immutable Message")}function pe(t){var e=t.length;(e=e?t[e-1]:void 0)&&Vt(e)?e.g=1:(e={},t.push((e.g=1,e)))}function Ke(t){var e=t.i+t.G;return t.B||(t.B=t.o[e]={})}function X(t,e){return e===-1?null:e>=t.i?t.B?t.B[e]:void 0:t.o[e+t.G]}function Z(t,e,r,n){he(t),Rt(t,e,r,n)}function Rt(t,e,r,n){t.j&&(t.j=void 0),e>=t.i||n?Ke(t)[e]=r:(t.o[e+t.G]=r,(t=t.B)&&e in t&&delete t[e])}function de(t,e,r,n){var i=X(t,e);Array.isArray(i)||(i=Nt);var s=N(i);if(s&1||ce(i),n)s&2||ct(i,2),r&1||Object.freeze(i);else{n=!(r&2);var o=s&2;r&1||!o?n&&s&16&&!o&&Xe(i,16):(i=ce(Array.prototype.slice.call(i)),Rt(t,e,i))}return i}function me(t,e){var r=X(t,e),n=r==null?r:typeof r=="number"||r==="NaN"||r==="Infinity"||r==="-Infinity"?Number(r):void 0;return n!=null&&n!==r&&Rt(t,e,n),n}function ze(t,e,r,n,i){t.h||(t.h={});var s=t.h[r],o=de(t,r,3,i);if(!s){var l=o;s=[];var u=!!(N(t.o)&16);o=!!(N(l)&2);var a=l;!i&&o&&(l=Array.prototype.slice.call(l));for(var c=o,d=0;d<l.length;d++){var p=l[d],f=e,m=!1;if(m=m===void 0?!1:m,p=Array.isArray(p)?new f(p):m?new f:void 0,p!==void 0){f=p.o;var y=m=N(f);o&&(y|=2),u&&(y|=16),y!=m&&$(f,y),f=y,c=c||!!(2&f),s.push(p)}}return t.h[r]=s,u=N(l),e=u|33,e=c?e&-9:e|8,u!=e&&(c=l,Object.isFrozen(c)&&(c=Array.prototype.slice.call(c)),$(c,e),l=c),a!==l&&Rt(t,r,l),(i||n&&o)&&ct(s,2),n&&Object.freeze(s),s}return i||(i=Object.isFrozen(s),n&&!i?Object.freeze(s):!n&&i&&(s=Array.prototype.slice.call(s),t.h[r]=s)),s}function ve(t,e,r){var n=!!(N(t.o)&2);if(e=ze(t,e,r,n,n),t=de(t,r,3,n),!(n||N(t)&8)){for(n=0;n<e.length;n++){if(r=e[n],N(r.o)&2){var i=tr(r,!1);i.j=r}else i=r;r!==i&&(e[n]=i,t[n]=i.o)}ct(t,8)}return e}function J(t,e,r){if(r!=null&&typeof r!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof r+": "+r);Z(t,e,r)}function $e(t,e,r,n,i){he(t);var s=ze(t,r,e,!1,!1);return r=n??new r,t=de(t,e,2,!1),i!=null?(s.splice(i,0,r),t.splice(i,0,r.o)):(s.push(r),t.push(r.o)),r.C()&&Xe(t,8),r}function Kt(t,e){return t??e}function Q(t,e,r){return r=r===void 0?0:r,Kt(me(t,e),r)}var zt;function Or(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"object":if(t)if(Array.isArray(t)){if(N(t)&128)return t=Array.prototype.slice.call(t),pe(t),t}else{if(wt&&t!=null&&t instanceof Uint8Array)return bt(t);if(t instanceof Tt){var e=t.V;return e==null?"":typeof e=="string"?e:t.V=bt(e)}}}return t}function Ze(t,e,r,n){if(t!=null){if(Array.isArray(t))t=ye(t,e,r,n!==void 0);else if(Vt(t)){var i={},s;for(s in t)i[s]=Ze(t[s],e,r,n);t=i}else t=e(t,n);return t}}function ye(t,e,r,n){var i=N(t);n=n?!!(i&16):void 0,t=Array.prototype.slice.call(t);for(var s=0;s<t.length;s++)t[s]=Ze(t[s],e,r,n);return r(i,t),t}function Lr(t){return t.ja===fe?t.toJSON():Or(t)}function Cr(t,e){t&128&&pe(e)}function Je(t,e,r){if(r=r===void 0?Xt:r,t!=null){if(wt&&t instanceof Uint8Array)return t.length?new Tt(new Uint8Array(t),At):se();if(Array.isArray(t)){var n=N(t);return n&2?t:e&&!(n&32)&&(n&16||n===0)?($(t,n|2),t):(t=ye(t,Je,n&4?Xt:r,!0),e=N(t),e&4&&e&2&&Object.freeze(t),t)}return t.ja===fe?qe(t):t}}function Qe(t,e,r,n,i,s,o){if(t=t.h&&t.h[r]){if(n=N(t),n&2?n=t:(s=w(t,qe),Xt(n,s),Object.freeze(s),n=s),he(e),o=n==null?Nt:ce([]),n!=null){for(s=!!n.length,t=0;t<n.length;t++){var l=n[t];s=s&&!(N(l.o)&2),o[t]=l.o}s=(s?8:0)|1,t=N(o),(t&s)!==s&&(Object.isFrozen(o)&&(o=Array.prototype.slice.call(o)),$(o,t|s)),e.h||(e.h={}),e.h[r]=n}else e.h&&(e.h[r]=void 0);Rt(e,r,o,i)}else Z(e,r,Je(n,s,o),i)}function qe(t){return N(t.o)&2||(t=tr(t,!0),ct(t.o,2)),t}function tr(t,e){var r=t.o,n=[];ct(n,16);var i=t.constructor.h;if(i&&n.push(i),i=t.B,i){n.length=r.length,n.fill(void 0,n.length,r.length);var s={};n[n.length-1]=s}N(r)&128&&pe(n),e=e||t.C()?Xt:Sr,s=t.constructor,zt=n,n=new s(n),zt=void 0,t.R&&(n.R=t.R.slice()),s=!!(N(r)&16);for(var o=i?r.length-1:r.length,l=0;l<o;l++)Qe(t,n,l-t.G,r[l],!1,s,e);if(i)for(var u in i)Qe(t,n,+u,i[u],!0,s,e);return n}function D(t,e,r){t==null&&(t=zt),zt=void 0;var n=this.constructor.i||0,i=0<n,s=this.constructor.h,o=!1;if(t==null){t=s?[s]:[];var l=48,u=!0;i&&(n=0,l|=128),$(t,l)}else{if(!Array.isArray(t)||s&&s!==t[0])throw Error();var a=l=ct(t,0);if((u=(16&a)!==0)&&((o=(32&a)!==0)||(a|=32)),i){if(128&a)n=0;else if(0<t.length){var c=t[t.length-1];if(Vt(c)&&"g"in c){n=0,a|=128,delete c.g;var d=!0,p;for(p in c){d=!1;break}d&&t.pop()}}}else if(128&a)throw Error();l!==a&&$(t,a)}this.G=(s?0:-1)-n,this.h=void 0,this.o=t;t:{if(s=this.o.length,n=s-1,s&&(s=this.o[n],Vt(s))){this.B=s,this.i=n-this.G;break t}e!==void 0&&-1<e?(this.i=Math.max(e,n+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!i&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(r){e=u&&!o&&!0,i=this.i;var f;for(u=0;u<r.length;u++)o=r[u],o<i?(o+=this.G,(n=t[o])?er(n,e):t[o]=Nt):(f||(f=Ke(this)),(n=f[o])?er(n,e):f[o]=Nt)}}D.prototype.toJSON=function(){return ye(this.o,Lr,Cr)},D.prototype.C=function(){return!!(N(this.o)&2)};function er(t,e){if(Array.isArray(t)){var r=N(t),n=1;!e||r&2||(n|=16),(r&n)!==n&&$(t,r|n)}}D.prototype.ja=fe,D.prototype.toString=function(){return this.o.toString()};function rr(t,e,r){if(r){var n={},i;for(i in r){var s=r[i],o=s.ra;o||(n.J=s.xa||s.oa.W,s.ia?(n.aa=lr(s.ia),o=function(l){return function(u,a,c){return l.J(u,a,c,l.aa)}}(n)):s.ka?(n.Z=ur(s.da.P,s.ka),o=function(l){return function(u,a,c){return l.J(u,a,c,l.Z)}}(n)):o=n.J,s.ra=o),o(e,t,s.da),n={J:n.J,aa:n.aa,Z:n.Z}}}Fr(e,t)}var $t=Symbol();function nr(t,e,r){return t[$t]||(t[$t]=function(n,i){return e(n,i,r)})}function ir(t){var e=t[$t];if(!e){var r=xe(t);e=function(n,i){return ar(n,i,r)},t[$t]=e}return e}function Ir(t){var e=t.ia;if(e)return ir(e);if(e=t.wa)return nr(t.da.P,e,t.ka)}function Pr(t){var e=Ir(t),r=t.da,n=t.oa.U;return e?function(i,s){return n(i,s,r,e)}:function(i,s){return n(i,s,r)}}function or(t,e){var r=t[e];return typeof r=="function"&&r.length===0&&(r=r(),t[e]=r),Array.isArray(r)&&(St in r||Ft in r||0<r.length&&typeof r[0]=="function")?r:void 0}function sr(t,e,r,n,i,s){e.P=t[0];var o=1;if(t.length>o&&typeof t[o]!="number"){var l=t[o++];r(e,l)}for(;o<t.length;){r=t[o++];for(var u=o+1;u<t.length&&typeof t[u]!="number";)u++;switch(l=t[o++],u-=o,u){case 0:n(e,r,l);break;case 1:(u=or(t,o))?(o++,i(e,r,l,u)):n(e,r,l,t[o++]);break;case 2:u=o++,u=or(t,u),i(e,r,l,u,t[o++]);break;case 3:s(e,r,l,t[o++],t[o++],t[o++]);break;case 4:s(e,r,l,t[o++],t[o++],t[o++],t[o++]);break;default:throw Error("unexpected number of binary field arguments: "+u)}}return e}var Zt=Symbol();function lr(t){var e=t[Zt];if(!e){var r=ge(t);e=function(n,i){return cr(n,i,r)},t[Zt]=e}return e}function ur(t,e){var r=t[Zt];return r||(r=function(n,i){return rr(n,i,e)},t[Zt]=r),r}var Ft=Symbol();function kr(t,e){t.push(e)}function Ur(t,e,r){t.push(e,r.W)}function Hr(t,e,r,n){var i=lr(n),s=ge(n).P,o=r.W;t.push(e,function(l,u,a){return o(l,u,a,s,i)})}function Mr(t,e,r,n,i,s){var o=ur(n,s),l=r.W;t.push(e,function(u,a,c){return l(u,a,c,n,o)})}function ge(t){var e=t[Ft];return e||(e=sr(t,t[Ft]=[],kr,Ur,Hr,Mr),St in t&&Ft in t&&(t.length=0),e)}var St=Symbol();function Dr(t,e){t[0]=e}function Gr(t,e,r,n){var i=r.U;t[e]=n?function(s,o,l){return i(s,o,l,n)}:i}function Br(t,e,r,n,i){var s=r.U,o=ir(n),l=xe(n).P;t[e]=function(u,a,c){return s(u,a,c,l,o,i)}}function Yr(t,e,r,n,i,s,o){var l=r.U,u=nr(n,i,s);t[e]=function(a,c,d){return l(a,c,d,n,u,o)}}function xe(t){var e=t[St];return e||(e=sr(t,t[St]={},Dr,Gr,Br,Yr),St in t&&Ft in t&&(t.length=0),e)}function ar(t,e,r){for(;We(e)&&e.i!=4;){var n=e.l,i=r[n];if(!i){var s=r[0];s&&(s=s[n])&&(i=r[n]=Pr(s))}if(!i||!i(e,t,n)){i=e,n=t,s=i.j,Yt(i);var o=i;if(!o.ca){if(i=o.h.h-s,o.h.h=s,o=o.h,i==0)i=se();else{if(s=Ge(o,i),o.S&&o.m)i=o.i.subarray(s,s+i);else{o=o.i;var l=s;i=s+i,i=l===i?ne():jr?o.slice(l,i):new Uint8Array(o.subarray(l,i))}i=i.length==0?se():new Tt(i,At)}(s=n.R)?s.push(i):n.R=[i]}}}return t}function cr(t,e,r){for(var n=r.length,i=n%2==1,s=i?1:0;s<n;s+=2)(0,r[s+1])(e,t,r[s]);rr(t,e,i?r[0]:void 0)}function Ot(t,e){return{U:t,W:e}}var V=Ot(function(t,e,r){if(t.i!==5)return!1;t=t.h;var n=t.i,i=t.h,s=n[i],o=n[i+1],l=n[i+2];return n=n[i+3],ut(t,t.h+4),o=(s<<0|o<<8|l<<16|n<<24)>>>0,t=2*(o>>31)+1,s=o>>>23&255,o&=8388607,Z(e,r,s==255?o?NaN:1/0*t:s==0?t*Math.pow(2,-149)*o:t*Math.pow(2,s-150)*(o+Math.pow(2,23))),!0},function(t,e,r){if(e=me(e,r),e!=null){at(t.h,8*r+5),t=t.h;var n=+e;n===0?0<1/n?F=H=0:(H=0,F=2147483648):isNaN(n)?(H=0,F=2147483647):(n=(r=0>n?-2147483648:0)?-n:n,34028234663852886e22<n?(H=0,F=(r|2139095040)>>>0):11754943508222875e-54>n?(n=Math.round(n/Math.pow(2,-149)),H=0,F=(r|n)>>>0):(e=Math.floor(Math.log(n)/Math.LN2),n*=Math.pow(2,-e),n=Math.round(8388608*n),16777216<=n&&++e,H=0,F=(r|e+127<<23|n&8388607)>>>0)),r=F,t.h.push(r>>>0&255),t.h.push(r>>>8&255),t.h.push(r>>>16&255),t.h.push(r>>>24&255)}}),Wr=Ot(function(t,e,r){if(t.i!==0)return!1;var n=t.h,i=0,s=t=0,o=n.i,l=n.h;do{var u=o[l++];i|=(u&127)<<s,s+=7}while(32>s&&u&128);for(32<s&&(t|=(u&127)>>4),s=3;32>s&&u&128;s+=7)u=o[l++],t|=(u&127)<<s;if(ut(n,l),128>u)n=i>>>0,u=t>>>0,(t=u&2147483648)&&(n=~n+1>>>0,u=~u>>>0,n==0&&(u=u+1>>>0)),n=4294967296*u+(n>>>0);else throw ie();return Z(e,r,t?-n:n),!0},function(t,e,r){e=X(e,r),e!=null&&(typeof e=="string"&&Oe(e),e!=null&&(at(t.h,8*r),typeof e=="number"?(t=t.h,Re(e),Ye(t,F,H)):(r=Oe(e),Ye(t.h,r.i,r.h))))}),Xr=Ot(function(t,e,r){return t.i!==0?!1:(Z(e,r,_t(t.h)),!0)},function(t,e,r){if(e=X(e,r),e!=null&&e!=null)if(at(t.h,8*r),t=t.h,r=e,0<=r)at(t,r);else{for(e=0;9>e;e++)t.h.push(r&127|128),r>>=7;t.h.push(1)}}),fr=Ot(function(t,e,r){if(t.i!==2)return!1;var n=_t(t.h)>>>0;t=t.h;var i=Ge(t,n);if(t=t.i,Tr){var s=t,o;(o=oe)||(o=oe=new TextDecoder("utf-8",{fatal:!0})),t=i+n,s=i===0&&t===s.length?s:s.subarray(i,t);try{var l=o.decode(s)}catch(d){if(Bt===void 0){try{o.decode(new Uint8Array([128]))}catch{}try{o.decode(new Uint8Array([97])),Bt=!0}catch{Bt=!1}}throw!Bt&&(oe=void 0),d}}else{l=i,n=l+n,i=[];for(var u=null,a,c;l<n;)a=t[l++],128>a?i.push(a):224>a?l>=n?lt():(c=t[l++],194>a||(c&192)!==128?(l--,lt()):i.push((a&31)<<6|c&63)):240>a?l>=n-1?lt():(c=t[l++],(c&192)!==128||a===224&&160>c||a===237&&160<=c||((s=t[l++])&192)!==128?(l--,lt()):i.push((a&15)<<12|(c&63)<<6|s&63)):244>=a?l>=n-2?lt():(c=t[l++],(c&192)!==128||(a<<28)+(c-144)>>30||((s=t[l++])&192)!==128||((o=t[l++])&192)!==128?(l--,lt()):(a=(a&7)<<18|(c&63)<<12|(s&63)<<6|o&63,a-=65536,i.push((a>>10&1023)+55296,(a&1023)+56320))):lt(),8192<=i.length&&(u=Pe(u,i),i.length=0);l=Pe(u,i)}return Z(e,r,l),!0},function(t,e,r){if(e=X(e,r),e!=null){var n=!1;if(n=n===void 0?!1:n,_r){if(n&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(e))throw Error("Found an unpaired surrogate");e=(ke||(ke=new TextEncoder)).encode(e)}else{for(var i=0,s=new Uint8Array(3*e.length),o=0;o<e.length;o++){var l=e.charCodeAt(o);if(128>l)s[i++]=l;else{if(2048>l)s[i++]=l>>6|192;else{if(55296<=l&&57343>=l){if(56319>=l&&o<e.length){var u=e.charCodeAt(++o);if(56320<=u&&57343>=u){l=1024*(l-55296)+u-56320+65536,s[i++]=l>>18|240,s[i++]=l>>12&63|128,s[i++]=l>>6&63|128,s[i++]=l&63|128;continue}else o--}if(n)throw Error("Found an unpaired surrogate");l=65533}s[i++]=l>>12|224,s[i++]=l>>6&63|128}s[i++]=l&63|128}}e=i===s.length?s:s.subarray(0,i)}at(t.h,8*r+2),at(t.h,e.length),mt(t,t.h.end()),mt(t,e)}}),hr=Ot(function(t,e,r,n,i){if(t.i!==2)return!1;e=$e(e,r,n),r=t.h.j,n=_t(t.h)>>>0;var s=t.h.h+n,o=s-r;if(0>=o&&(t.h.j=s,i(e,t,void 0,void 0,void 0),o=s-t.h.h),o)throw Error("Message parsing ended unexpectedly. Expected to read "+(n+" bytes, instead read "+(n-o)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return t.h.h=s,t.h.j=r,!0},function(t,e,r,n,i){if(e=ve(e,n,r),e!=null)for(n=0;n<e.length;n++){var s=t;at(s.h,8*r+2);var o=s.h.end();mt(s,o),o.push(s.i),s=o,i(e[n],t),o=t;var l=s.pop();for(l=o.i+o.h.length()-l;127<l;)s.push(l&127|128),l>>>=7,o.i++;s.push(l),o.i++}});function we(t){return function(e,r){t:{if(Wt.length){var n=Wt.pop();n.setOptions(r),le(n.h,e,r),e=n}else e=new ae(e,r);try{var i=xe(t),s=ar(new i.P,e,i);break t}finally{i=e.h,i.i=null,i.m=!1,i.l=0,i.j=0,i.h=0,i.S=!1,e.l=-1,e.i=-1,100>Wt.length&&Wt.push(e)}s=void 0}return s}}function be(t){return function(){var e=new Rr;cr(this,e,ge(t)),mt(e,e.h.end());for(var r=new Uint8Array(e.i),n=e.j,i=n.length,s=0,o=0;o<i;o++){var l=n[o];r.set(l,s),s+=l.length}return e.j=[r],r}}function vt(t){D.call(this,t)}pt(vt,D);var pr=[vt,1,Xr,2,V,3,fr,4,fr];vt.prototype.l=be(pr);function Ee(t){D.call(this,t,-1,Vr)}pt(Ee,D),Ee.prototype.addClassification=function(t,e){return $e(this,1,vt,t,e),this};var Vr=[1],Kr=we([Ee,1,hr,pr]);function Lt(t){D.call(this,t)}pt(Lt,D);var dr=[Lt,1,V,2,V,3,V,4,V,5,V];Lt.prototype.l=be(dr);function mr(t){D.call(this,t,-1,zr)}pt(mr,D);var zr=[1],$r=we([mr,1,hr,dr]);function Jt(t){D.call(this,t)}pt(Jt,D);var vr=[Jt,1,V,2,V,3,V,4,V,5,V,6,Wr],Zr=we(vr);Jt.prototype.l=be(vr);function yr(t,e,r){if(r=t.createShader(r===0?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+t.getShaderInfoLog(r));return r}function Jr(t){return ve(t,vt,1).map(function(e){var r=X(e,1);return{index:r??0,qa:Q(e,2),label:X(e,3)!=null?Kt(X(e,3),""):void 0,displayName:X(e,4)!=null?Kt(X(e,4),""):void 0}})}function Qr(t){return{x:Q(t,1),y:Q(t,2),z:Q(t,3),visibility:me(t,4)!=null?Q(t,4):void 0}}function je(t){return ve($r(t),Lt,1).map(Qr)}function Ae(t,e){this.i=t,this.h=e,this.m=0}function gr(t,e,r){return qr(t,e),typeof t.h.canvas.transferToImageBitmap=="function"?Promise.resolve(t.h.canvas.transferToImageBitmap()):r?Promise.resolve(t.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(t.h.canvas):(t.j===void 0&&(t.j=document.createElement("canvas")),new Promise(function(n){t.j.height=t.h.canvas.height,t.j.width=t.h.canvas.width,t.j.getContext("2d",{}).drawImage(t.h.canvas,0,0,t.h.canvas.width,t.h.canvas.height),n(t.j)}))}function qr(t,e){var r=t.h;if(t.s===void 0){var n=yr(r,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),i=yr(r,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),s=r.createProgram();if(r.attachShader(s,n),r.attachShader(s,i),r.linkProgram(s),!r.getProgramParameter(s,r.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+r.getProgramInfoLog(s));n=t.s=s,r.useProgram(n),i=r.getUniformLocation(n,"sampler0"),t.l={O:r.getAttribLocation(n,"aVertex"),N:r.getAttribLocation(n,"aTex"),ya:i},t.v=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,t.v),r.enableVertexAttribArray(t.l.O),r.vertexAttribPointer(t.l.O,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),t.u=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,t.u),r.enableVertexAttribArray(t.l.N),r.vertexAttribPointer(t.l.N,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),r.uniform1i(i,0)}n=t.l,r.useProgram(t.s),r.canvas.width=e.width,r.canvas.height=e.height,r.viewport(0,0,e.width,e.height),r.activeTexture(r.TEXTURE0),t.i.bindTexture2d(e.glName),r.enableVertexAttribArray(n.O),r.bindBuffer(r.ARRAY_BUFFER,t.v),r.vertexAttribPointer(n.O,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n.N),r.bindBuffer(r.ARRAY_BUFFER,t.u),r.vertexAttribPointer(n.N,2,r.FLOAT,!1,0,0),r.bindFramebuffer(r.DRAW_FRAMEBUFFER?r.DRAW_FRAMEBUFFER:r.FRAMEBUFFER,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.colorMask(!0,!0,!0,!0),r.drawArrays(r.TRIANGLE_FAN,0,4),r.disableVertexAttribArray(n.O),r.disableVertexAttribArray(n.N),r.bindBuffer(r.ARRAY_BUFFER,null),t.i.bindTexture2d(0)}function tn(t){this.h=t}var en=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function rn(t,e){return e+t}function xr(t,e){window[t]=e}function nn(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise(function(r){e.addEventListener("load",function(){r()},!1),e.addEventListener("error",function(){r()},!1),document.body.appendChild(e)})}function on(){return S(function(t){switch(t.h){case 1:return t.s=2,b(t,WebAssembly.instantiate(en),4);case 4:t.h=3,t.s=0;break;case 2:return t.s=0,t.l=null,t.return(!1);case 3:return t.return(!0)}})}function Te(t){if(this.h=t,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=t&&t.locateFile||rn,typeof window=="object")var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=e,t.options){e=O(Object.keys(t.options));for(var r=e.next();!r.done;r=e.next()){r=r.value;var n=t.options[r].default;n!==void 0&&(this.l[r]=typeof n=="function"?n():n)}}}T=Te.prototype,T.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function sn(t){var e,r,n,i,s,o,l,u,a,c,d;return S(function(p){switch(p.h){case 1:return t.ga?(e=t.h.files===void 0?[]:typeof t.h.files=="function"?t.h.files(t.l):t.h.files,b(p,on(),2)):p.return();case 2:if(r=p.i,typeof window=="object")return xr("createMediapipeSolutionsWasm",{locateFile:t.locateFile}),xr("createMediapipeSolutionsPackedAssets",{locateFile:t.locateFile}),o=e.filter(function(f){return f.data!==void 0}),l=e.filter(function(f){return f.data===void 0}),u=Promise.all(o.map(function(f){var m=Qt(t,f.url);if(f.path!==void 0){var y=f.path;m=m.then(function(A){return t.overrideFile(y,A),Promise.resolve(A)})}return m})),a=Promise.all(l.map(function(f){return f.simd===void 0||f.simd&&r||!f.simd&&!r?nn(t.locateFile(f.url,t.ha)):Promise.resolve()})).then(function(){var f,m,y;return S(function(A){if(A.h==1)return f=window.createMediapipeSolutionsWasm,m=window.createMediapipeSolutionsPackedAssets,y=t,b(A,f(m),2);y.i=A.i,A.h=0})}),c=function(){return S(function(f){return t.h.graph&&t.h.graph.url?f=b(f,Qt(t,t.h.graph.url),0):(f.h=0,f=void 0),f})}(),b(p,Promise.all([a,u,c]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return n=e.filter(function(f){return f.simd===void 0||f.simd&&r||!f.simd&&!r}).map(function(f){return t.locateFile(f.url,t.ha)}),importScripts.apply(null,gt(n)),i=t,b(p,createMediapipeSolutionsWasm(Module),6);case 6:i.i=p.i,t.m=new OffscreenCanvas(1,1),t.i.canvas=t.m,s=t.i.GL.createContext(t.m,{antialias:!1,alpha:!1,va:typeof WebGL2RenderingContext<"u"?2:1}),t.i.GL.makeContextCurrent(s),p.h=4;break;case 7:if(t.m=document.createElement("canvas"),d=t.m.getContext("webgl2",{}),!d&&(d=t.m.getContext("webgl",{}),!d))return alert("Failed to create WebGL canvas context when passing video frame."),p.return();t.K=d,t.i.canvas=t.m,t.i.createContext(t.m,!0,!0,{});case 4:t.j=new t.i.SolutionWasm,t.ga=!1,p.h=0}})}function ln(t){var e,r,n,i,s,o,l,u;return S(function(a){if(a.h==1){if(t.h.graph&&t.h.graph.url&&t.fa===t.h.graph.url)return a.return();if(t.u=!0,!t.h.graph||!t.h.graph.url){a.h=2;return}return t.fa=t.h.graph.url,b(a,Qt(t,t.h.graph.url),3)}for(a.h!=2&&(e=a.i,t.j.loadGraph(e)),r=O(Object.keys(t.D)),n=r.next();!n.done;n=r.next())i=n.value,t.j.overrideFile(i,t.D[i]);if(t.D={},t.h.listeners)for(s=O(t.h.listeners),o=s.next();!o.done;o=s.next())l=o.value,fn(t,l);u=t.l,t.l={},t.setOptions(u),a.h=0})}T.reset=function(){var t=this;return S(function(e){t.j&&(t.j.reset(),t.s={},t.v={}),e.h=0})},T.setOptions=function(t,e){var r=this;if(e=e||this.h.options){for(var n=[],i=[],s={},o=O(Object.keys(t)),l=o.next();!l.done;s={X:s.X,Y:s.Y},l=o.next())if(l=l.value,!(l in this.l&&this.l[l]===t[l])){this.l[l]=t[l];var u=e[l];u!==void 0&&(u.onChange&&(s.X=u.onChange,s.Y=t[l],n.push(function(a){return function(){var c;return S(function(d){if(d.h==1)return b(d,a.X(a.Y),2);c=d.i,c===!0&&(r.u=!0),d.h=0})}}(s))),u.graphOptionXref&&(l=Object.assign({},{calculatorName:"",calculatorIndex:0},u.graphOptionXref,{valueNumber:u.type===1?t[l]:0,valueBoolean:u.type===0?t[l]:!1,valueString:u.type===2?t[l]:""}),i.push(l)))}(n.length!==0||i.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(i),this.F=(this.F===void 0?[]:this.F).concat(n))}};function un(t){var e,r,n,i,s,o,l;return S(function(u){switch(u.h){case 1:if(!t.u)return u.return();if(!t.F){u.h=2;break}e=O(t.F),r=e.next();case 3:if(r.done){u.h=5;break}return n=r.value,b(u,n(),4);case 4:r=e.next(),u.h=3;break;case 5:t.F=void 0;case 2:if(t.H){for(i=new t.i.GraphOptionChangeRequestList,s=O(t.H),o=s.next();!o.done;o=s.next())l=o.value,i.push_back(l);t.j.changeOptions(i),i.delete(),t.H=void 0}t.u=!1,u.h=0}})}T.initialize=function(){var t=this;return S(function(e){return e.h==1?b(e,sn(t),2):e.h!=3?b(e,ln(t),3):b(e,un(t),0)})};function Qt(t,e){var r,n;return S(function(i){return e in t.L?i.return(t.L[e]):(r=t.locateFile(e,""),n=fetch(r).then(function(s){return s.arrayBuffer()}),t.L[e]=n,i.return(n))})}T.overrideFile=function(t,e){this.j?this.j.overrideFile(t,e):this.D[t]=e},T.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},T.send=function(t,e){var r=this,n,i,s,o,l,u,a,c,d;return S(function(p){switch(p.h){case 1:return r.h.inputs?(n=1e3*(e??performance.now()),b(p,r.I,2)):p.return();case 2:return b(p,r.initialize(),3);case 3:for(i=new r.i.PacketDataList,s=O(Object.keys(t)),o=s.next();!o.done;o=s.next())if(l=o.value,u=r.h.inputs[l]){t:{var f=t[l];switch(u.type){case"video":var m=r.s[u.stream];if(m||(m=new Ae(r.i,r.K),r.s[u.stream]=m),m.m===0&&(m.m=m.i.createTexture()),typeof HTMLVideoElement<"u"&&f instanceof HTMLVideoElement)var y=f.videoWidth,A=f.videoHeight;else typeof HTMLImageElement<"u"&&f instanceof HTMLImageElement?(y=f.naturalWidth,A=f.naturalHeight):(y=f.width,A=f.height);A={glName:m.m,width:y,height:A},y=m.h,y.canvas.width=A.width,y.canvas.height=A.height,y.activeTexture(y.TEXTURE0),m.i.bindTexture2d(m.m),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,f),m.i.bindTexture2d(0),m=A;break t;case"detections":for(m=r.s[u.stream],m||(m=new tn(r.i),r.s[u.stream]=m),m.data||(m.data=new m.h.DetectionListData),m.data.reset(f.length),A=0;A<f.length;++A){y=f[A];var E=m.data,L=E.setBoundingBox,B=A,G=y.la,g=new Jt;if(J(g,1,G.sa),J(g,2,G.ta),J(g,3,G.height),J(g,4,G.width),J(g,5,G.rotation),Z(g,6,G.pa),G=g.l(),L.call(E,B,G),y.ea)for(E=0;E<y.ea.length;++E){g=y.ea[E],L=m.data,B=L.addNormalizedLandmark,G=A,g=Object.assign({},g,{visibility:g.visibility?g.visibility:0});var C=new Lt;J(C,1,g.x),J(C,2,g.y),J(C,3,g.z),g.visibility&&J(C,4,g.visibility),g=C.l(),B.call(L,G,g)}if(y.ba)for(E=0;E<y.ba.length;++E)L=m.data,B=L.addClassification,G=A,g=y.ba[E],C=new vt,J(C,2,g.qa),g.index&&Z(C,1,g.index),g.label&&Z(C,3,g.label),g.displayName&&Z(C,4,g.displayName),g=C.l(),B.call(L,G,g)}m=m.data;break t;default:m={}}}switch(a=m,c=u.stream,u.type){case"video":i.pushTexture2d(Object.assign({},a,{stream:c,timestamp:n}));break;case"detections":d=a,d.stream=c,d.timestamp=n,i.pushDetectionList(d);break;default:throw Error("Unknown input config type: '"+u.type+"'")}}return r.j.send(i),b(p,r.I,4);case 4:i.delete(),p.h=0}})};function an(t,e,r){var n,i,s,o,l,u,a,c,d,p,f,m,y,A;return S(function(E){switch(E.h){case 1:if(!r)return E.return(e);for(n={},i=0,s=O(Object.keys(r)),o=s.next();!o.done;o=s.next())l=o.value,u=r[l],typeof u!="string"&&u.type==="texture"&&e[u.stream]!==void 0&&++i;1<i&&(t.M=!1),a=O(Object.keys(r)),o=a.next();case 2:if(o.done){E.h=4;break}if(c=o.value,d=r[c],typeof d=="string")return y=n,A=c,b(E,cn(t,c,e[d]),14);if(p=e[d.stream],d.type==="detection_list"){if(p){for(var L=p.getRectList(),B=p.getLandmarksList(),G=p.getClassificationsList(),g=[],C=0;C<L.size();++C){var et=Zr(L.get(C)),hn=Q(et,1),pn=Q(et,2),dn=Q(et,3),mn=Q(et,4),vn=Q(et,5,0),qt=void 0;qt=qt===void 0?0:qt,et={la:{sa:hn,ta:pn,height:dn,width:mn,rotation:vn,pa:Kt(X(et,6),qt)},ea:je(B.get(C)),ba:Jr(Kr(G.get(C)))},g.push(et)}L=g}else L=[];n[c]=L,E.h=7;break}if(d.type==="proto_list"){if(p){for(L=Array(p.size()),B=0;B<p.size();B++)L[B]=p.get(B);p.delete()}else L=[];n[c]=L,E.h=7;break}if(p===void 0){E.h=3;break}if(d.type==="float_list"){n[c]=p,E.h=7;break}if(d.type==="proto"){n[c]=p,E.h=7;break}if(d.type!=="texture")throw Error("Unknown output config type: '"+d.type+"'");return f=t.v[c],f||(f=new Ae(t.i,t.K),t.v[c]=f),b(E,gr(f,p,t.M),13);case 13:m=E.i,n[c]=m;case 7:d.transform&&n[c]&&(n[c]=d.transform(n[c])),E.h=3;break;case 14:y[A]=E.i;case 3:o=a.next(),E.h=2;break;case 4:return E.return(n)}})}function cn(t,e,r){var n;return S(function(i){return typeof r=="number"||r instanceof Uint8Array||r instanceof t.i.Uint8BlobList?i.return(r):r instanceof t.i.Texture2dDataOut?(n=t.v[e],n||(n=new Ae(t.i,t.K),t.v[e]=n),i.return(gr(n,r,t.M))):i.return(void 0)})}function fn(t,e){for(var r=e.name||"$",n=[].concat(gt(e.wants)),i=new t.i.StringList,s=O(e.wants),o=s.next();!o.done;o=s.next())i.push_back(o.value);s=t.i.PacketListener.implement({onResults:function(l){for(var u={},a=0;a<e.wants.length;++a)u[n[a]]=l.get(a);var c=t.listeners[r];c&&(t.I=an(t,u,e.outs).then(function(d){d=c(d);for(var p=0;p<e.wants.length;++p){var f=u[n[p]];typeof f=="object"&&f.hasOwnProperty&&f.hasOwnProperty("delete")&&f.delete()}d&&(t.I=d)}))}}),t.j.attachMultiListener(i,s),i.delete()}T.onResults=function(t,e){this.listeners[e||"$"]=t},x("Solution",Te),x("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"});function wr(t){switch(t===void 0&&(t=0),t){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function br(t){var e=this;t=t||{},this.h=new Te({locateFile:t.locateFile,files:function(r){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:wr(r.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:je},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:je},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(r){var n,i,s;return S(function(o){return o.h==1?(n=wr(r),i="third_party/mediapipe/modules/pose_landmark/"+n,b(o,Qt(e.h,n),2)):(s=o.i,e.h.overrideFile(i,s),o.return(!0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}T=br.prototype,T.reset=function(){this.h.reset()},T.close=function(){return this.h.close(),Promise.resolve()},T.onResults=function(t){this.h.onResults(t)},T.initialize=function(){var t=this;return S(function(e){return b(e,t.h.initialize(),0)})},T.send=function(t,e){var r=this;return S(function(n){return b(n,r.h.send(t,e),0)})},T.setOptions=function(t){this.h.setOptions(t)},x("Pose",br),x("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),x("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),x("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),x("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),x("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),x("VERSION","0.5.1675469404")}).call(_e);const Er=[{type:"right",time:1e3},{type:"left",time:1500},{type:"right",time:2e3},{type:"left",time:2500},{type:"both",time:3e3},{type:"right",time:3500},{type:"left",time:4e3},{type:"jump",time:4500},{type:"right",time:5e3},{type:"left",time:5500},{type:"both",time:6e3},{type:"jump",time:6500},{type:"right",time:7e3},{type:"right",time:7250},{type:"left",time:7500},{type:"left",time:7750},{type:"both",time:8e3}];function Pn(){const T=M.useRef(null),U=M.useRef(null),[rt,te]=M.useState(!1),[Y,_]=M.useState(!1),[Ct,O]=M.useState(!1),[gt,It]=M.useState(!1),[Pt,ft]=M.useState(3),[I,nt]=M.useState({score:0,combo:0,maxCombo:0,perfectCount:0,goodCount:0,missCount:0,isPlaying:!1}),[P,ht]=M.useState(null),[pt,tt]=M.useState([]),[K,xt]=M.useState({leftArm:"down",rightArm:"down",isJumping:!1}),[b,dt]=M.useState({type:"perfect",show:!1}),kt=M.useRef(0),it=M.useRef(null),ot=M.useCallback(async()=>{if(!T.current)return;_(!0);const x=new _n.Pose({locateFile:w=>`https://cdn.jsdelivr.net/npm/@mediapipe/pose/${w}`});x.setOptions({modelComplexity:1,smoothLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),x.onResults(w=>{ee(w),S(w)}),await new xn.Camera(T.current,{onFrame:async()=>{T.current&&await x.send({image:T.current})},width:640,height:480}).start(),_(!1),te(!0)},[]),ee=x=>{if(!x.poseLandmarks)return;const v=x.poseLandmarks,w=v[11],k=v[12];v[13],v[14];const R=v[15],j=v[16],z=v[23],Ht=v[24],wt=v[27],Mt=v[28],bt=R.y<w.y-.1,Et=j.y<k.y-.1,Dt=(z.y+Ht.y)/2,Gt=(wt.y+Mt.y)/2,jt=it.current?Dt<it.current.hipY-.05:!1;it.current={hipY:Dt,ankleY:Gt},xt({leftArm:bt?"up":"down",rightArm:Et?"up":"down",isJumping:jt}),I.isPlaying&&P&&!P.hit&&re(P,{leftArmUp:bt,rightArmUp:Et,isJumping:jt})},re=(x,v)=>{let w=!1;switch(x.type){case"left":w=v.leftArmUp;break;case"right":w=v.rightArmUp;break;case"both":w=v.leftArmUp&&v.rightArmUp;break;case"jump":w=v.isJumping;break}if(w){const k=Date.now()-kt.current-x.time,R=Math.abs(k)<100;dt({type:R?"perfect":"good",show:!0}),setTimeout(()=>dt(j=>({...j,show:!1})),300),nt(j=>({...j,score:j.score+(R?100:50),combo:j.combo+1,maxCombo:Math.max(j.maxCombo,j.combo+1),perfectCount:j.perfectCount+(R?1:0),goodCount:j.goodCount+(R?0:1)})),tt(j=>j.map(z=>z.id===x.id?{...z,hit:!0}:z))}},S=x=>{if(!U.current||!x.poseLandmarks)return;const v=U.current.getContext("2d");if(!v)return;v.clearRect(0,0,U.current.width,U.current.height),v.save(),v.scale(-1,1),v.drawImage(x.image,-U.current.width,0),v.restore();const w=[[11,13],[13,15],[12,14],[14,16],[11,12],[11,23],[12,24],[23,24],[23,25],[25,27],[24,26],[26,28]];v.strokeStyle="#F59E0B",v.lineWidth=4,w.forEach(([k,R])=>{const j=x.poseLandmarks[k],z=x.poseLandmarks[R];v.beginPath(),v.moveTo((1-j.x)*U.current.width,j.y*U.current.height),v.lineTo((1-z.x)*U.current.width,z.y*U.current.height),v.stroke()}),v.fillStyle="#EF4444",x.poseLandmarks.forEach((k,R)=>{[11,12,13,14,15,16,23,24,25,26,27,28].includes(R)&&(v.beginPath(),v.arc((1-k.x)*U.current.width,k.y*U.current.height,8,0,Math.PI*2),v.fill())})},Ut=()=>{It(!0),ft(3);const x=setInterval(()=>{ft(v=>v<=1?(clearInterval(x),It(!1),W(),0):v-1)},1e3)},W=()=>{kt.current=Date.now();const x=Er.map((w,k)=>({...w,id:k,hit:!1}));tt(x),nt(w=>({...w,isPlaying:!0})),x.forEach(w=>{setTimeout(()=>{ht(w)},w.time-500),setTimeout(()=>{tt(k=>{const R=k.find(j=>j.id===w.id);return R&&!R.hit&&(dt({type:"miss",show:!0}),setTimeout(()=>dt(j=>({...j,show:!1})),300),nt(j=>({...j,combo:0,missCount:j.missCount+1}))),k})},w.time+300)});const v=Math.max(...Er.map(w=>w.time));setTimeout(()=>{nt(w=>({...w,isPlaying:!1})),ht(null)},v+1e3)},st=()=>{nt({score:0,combo:0,maxCombo:0,perfectCount:0,goodCount:0,missCount:0,isPlaying:!1}),tt([]),ht(null)};return h.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-orange-950 via-red-900 to-stone-900",children:[h.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex items-center justify-between z-20",children:[h.jsxs(yn,{to:"/",className:"flex items-center gap-2 px-4 py-2 bg-black/40 backdrop-blur rounded-full text-orange-100 hover:bg-black/60 transition-colors",children:[h.jsx(wn,{className:"w-5 h-5"}),""]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"px-4 py-2 bg-black/40 backdrop-blur rounded-full",children:[h.jsx("span",{className:"text-orange-200 text-sm",children:""}),h.jsx("span",{className:"text-white font-bold text-lg ml-2",children:I.score})]}),h.jsxs("div",{className:"px-4 py-2 bg-black/40 backdrop-blur rounded-full",children:[h.jsx("span",{className:"text-orange-200 text-sm",children:""}),h.jsx("span",{className:"text-yellow-400 font-bold text-lg ml-2",children:I.combo})]})]}),h.jsx("button",{onClick:()=>O(!Ct),className:"p-2 bg-black/40 backdrop-blur rounded-full text-orange-100 hover:bg-black/60 transition-colors",children:Ct?h.jsx(bn,{className:"w-5 h-5"}):h.jsx(gn,{className:"w-5 h-5"})})]}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center pt-16 pb-24",children:h.jsxs("div",{className:"relative",children:[h.jsx("canvas",{ref:U,width:640,height:480,className:`rounded-2xl shadow-2xl border-4 border-orange-600/50 ${rt?"block":"hidden"}`}),h.jsx("video",{ref:T,className:"hidden",playsInline:!0,muted:!0}),I.isPlaying&&P&&h.jsx("div",{className:"absolute inset-x-0 top-4 flex justify-center",children:h.jsxs(yt.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:`
                  px-8 py-4 rounded-2xl text-white font-bold text-2xl
                  ${P.type==="left"?"bg-blue-500":""}
                  ${P.type==="right"?"bg-red-500":""}
                  ${P.type==="both"?"bg-purple-500":""}
                  ${P.type==="jump"?"bg-green-500":""}
                `,children:[P.type==="left"&&" ",P.type==="right"&&" ",P.type==="both"&&" ",P.type==="jump"&&" "]},P.id)}),h.jsx(Ne,{children:b.show&&h.jsx(yt.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},className:`
                  absolute inset-0 flex items-center justify-center pointer-events-none
                `,children:h.jsxs("span",{className:`
                  text-6xl font-black
                  ${b.type==="perfect"?"text-yellow-400":""}
                  ${b.type==="good"?"text-green-400":""}
                  ${b.type==="miss"?"text-red-400":""}
                `,children:[b.type==="perfect"&&"!",b.type==="good"&&"!",b.type==="miss"&&"Miss"]})})}),rt&&h.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex justify-between",children:[h.jsx("div",{className:`px-4 py-2 rounded-xl ${K.leftArm==="up"?"bg-blue-500":"bg-black/40"}`,children:h.jsxs("span",{className:"text-white",children:[" ",K.leftArm==="up"?"":""]})}),h.jsx("div",{className:`px-4 py-2 rounded-xl ${K.isJumping?"bg-green-500":"bg-black/40"}`,children:h.jsx("span",{className:"text-white",children:K.isJumping?"!":""})}),h.jsx("div",{className:`px-4 py-2 rounded-xl ${K.rightArm==="up"?"bg-red-500":"bg-black/40"}`,children:h.jsxs("span",{className:"text-white",children:[" ",K.rightArm==="up"?"":""]})})]})]})}),h.jsx("div",{className:"absolute bottom-8 left-0 right-0 z-20",children:h.jsx("div",{className:"flex items-center justify-center gap-6",children:rt?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:st,className:"p-3 bg-black/40 backdrop-blur rounded-full text-orange-100 hover:bg-black/60 transition-colors",children:h.jsx(jn,{className:"w-6 h-6"})}),!I.isPlaying&&h.jsxs("button",{onClick:Ut,className:"px-8 py-4 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-full font-semibold text-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center gap-3",children:[h.jsx(An,{className:"w-6 h-6"}),""]})]}):h.jsx("button",{onClick:ot,disabled:Y,className:"px-8 py-4 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-full font-semibold text-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center gap-3 disabled:opacity-50",children:Y?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}),"..."]}):h.jsxs(h.Fragment,{children:[h.jsx(En,{className:"w-6 h-6"}),""]})})})}),h.jsx(Ne,{children:gt&&h.jsx(yt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center z-30 bg-black/60",children:h.jsx(yt.span,{initial:{scale:2,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},className:"text-9xl font-black text-white",children:Pt},Pt)})}),h.jsx(Ne,{children:!I.isPlaying&&I.score>0&&!gt&&h.jsx(yt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center z-30 bg-black/70",children:h.jsxs(yt.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-gradient-to-b from-orange-900 to-red-900 rounded-3xl p-8 text-center max-w-md mx-4",children:[h.jsx(Tn,{className:"w-16 h-16 text-yellow-400 mx-auto mb-4"}),h.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"!"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[h.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[h.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:I.score}),h.jsx("div",{className:"text-white/70 text-sm",children:""})]}),h.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[h.jsx("div",{className:"text-3xl font-bold text-orange-400",children:I.maxCombo}),h.jsx("div",{className:"text-white/70 text-sm",children:""})]})]}),h.jsxs("div",{className:"flex justify-center gap-4 text-sm mb-6",children:[h.jsxs("span",{className:"text-yellow-400",children:[" ",I.perfectCount]}),h.jsxs("span",{className:"text-green-400",children:[" ",I.goodCount]}),h.jsxs("span",{className:"text-red-400",children:["Miss ",I.missCount]})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:st,className:"flex-1 py-3 bg-white/10 text-white rounded-xl font-semibold hover:bg-white/20 transition-colors",children:""}),h.jsx("button",{onClick:()=>{st(),Ut()},className:"flex-1 py-3 bg-orange-500 text-white rounded-xl font-semibold hover:bg-orange-400 transition-colors",children:""})]})]})})}),h.jsx("div",{className:"absolute top-20 left-8 text-6xl opacity-20 animate-bounce",children:""}),h.jsx("div",{className:"absolute top-40 right-8 text-4xl opacity-20 animate-bounce",style:{animationDelay:"0.5s"},children:""}),h.jsx("div",{className:"absolute bottom-40 left-12 text-5xl opacity-20 animate-bounce",style:{animationDelay:"1s"},children:""})]})}export{Pn as default};
