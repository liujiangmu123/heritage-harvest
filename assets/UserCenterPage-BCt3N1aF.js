import{r as e,j as s}from"./three-vendor-BoyHWg1a.js";import{B as t}from"./Badge-CpTuckvr.js";import{C as a}from"./Card-DdB8Tkzb.js";import{a as l,b as i}from"./index-ceBQHVN4.js";import{u as r,a as n,E as c}from"./index-BZ3c0gis.js";import{u as d}from"./ecoAchievementStore-BMIFv13n.js";import{N as x,L as o}from"./core-vendor-Csnc5NqJ.js";import{m,ag as h,L as j,T as v,ah as b,ai as N,a1 as f,E as g,aj as p,r as u,ak as w,al as y}from"./ui-vendor-BCOa7pYq.js";const k=[{icon:j,label:"绿色积分",href:"/user/green-points"},{icon:v,label:"碳账户",href:"/user/carbon-account"},{icon:b,label:"排行榜",href:"/leaderboard"},{icon:N,label:"我的订单",href:"/user/orders",badge:"2"},{icon:f,label:"我的收藏",href:"/user/favorites"},{icon:g,label:"我的藏品",href:"/collection"},{icon:p,label:"账户设置",href:"/user/settings"}];function L(){var f,p,L;const{isAuthenticated:C,user:$,logout:A}=l(),{openLoginModal:B}=i(),[E,M]=e.useState("overview"),{totalPoints:P,currentLevel:S,getLevelProgress:q}=r(),z=c[S],D=q(),{totalCarbonSaved:F,getEquivalentMetrics:T,milestones:G}=n(),H=T(),I=G.filter(e=>e.unlocked),{achievements:J}=d(),K=J.filter(e=>e.unlocked);if(!C)return s.jsx(x,{to:"/",replace:!0});const O=(null==$?void 0:$.experience)?$.experience%1e3/10:0;return s.jsx("div",{className:"min-h-screen pt-20 pb-12 bg-gradient-to-b from-primary-50 to-white",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:s.jsx(a,{variant:"heritage",className:"p-8 mb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:(null==$?void 0:$.avatar)||"/avatars/default.png",alt:null==$?void 0:$.nickname,className:"w-28 h-28 rounded-2xl object-cover border-4 border-heritage-300"}),s.jsx("button",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-heritage-500 rounded-full flex items-center justify-center text-white shadow-lg",children:s.jsx(h,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-2",children:[s.jsx("h1",{className:"text-2xl font-bold text-ink-900",children:null==$?void 0:$.nickname}),s.jsxs(t,{variant:"heritage",children:["Lv.",null==$?void 0:$.level]})]}),s.jsx("p",{className:"text-ink-500 mb-4",children:null==$?void 0:$.email}),s.jsxs("div",{className:"max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-ink-500",children:"成长进度"}),s.jsxs("span",{className:"text-heritage-600 font-medium",children:[null==$?void 0:$.experience," / ",1e3*((null==$?void 0:$.level)||1)]})]}),s.jsx("div",{className:"h-2 bg-ink-100 rounded-full overflow-hidden",children:s.jsx(m.div,{initial:{width:0},animate:{width:`${O}%`},className:"h-full bg-gradient-to-r from-heritage-500 to-primary-500"})})]})]}),s.jsxs("div",{className:"flex gap-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-heritage-600",children:(null==(f=null==$?void 0:$.fragments)?void 0:f.length)||0}),s.jsx("div",{className:"text-sm text-ink-500",children:"碎片"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-heritage-600",children:(null==(p=null==$?void 0:$.badges)?void 0:p.length)||0}),s.jsx("div",{className:"text-sm text-ink-500",children:"徽章"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-heritage-600",children:(null==(L=null==$?void 0:$.orders)?void 0:L.length)||0}),s.jsx("div",{className:"text-sm text-ink-500",children:"订单"})]})]})]})})}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[s.jsx("div",{className:"md:col-span-1",children:s.jsx(a,{className:"p-4",children:s.jsxs("nav",{className:"space-y-1",children:[k.map(e=>s.jsxs(o,{to:e.href,className:"flex items-center justify-between px-4 py-3 rounded-xl hover:bg-primary-50 transition-colors group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(e.icon,{className:"w-5 h-5 text-ink-400 group-hover:text-primary-600"}),s.jsx("span",{className:"text-ink-700 group-hover:text-primary-600",children:e.label})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[e.badge&&s.jsx("span",{className:"px-2 py-0.5 bg-primary-100 text-primary-600 text-xs rounded-full",children:e.badge}),s.jsx(u,{className:"w-4 h-4 text-ink-300"})]})]},e.href)),s.jsxs("button",{onClick:A,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-red-50 transition-colors text-red-500",children:[s.jsx(w,{className:"w-5 h-5"}),s.jsx("span",{children:"退出登录"})]})]})})}),s.jsxs("div",{className:"md:col-span-2 space-y-6",children:[s.jsxs(a,{variant:"eco",className:"p-6 bg-gradient-to-br from-eco-50 to-bamboo-50 border-eco-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-bold text-eco-800 flex items-center gap-2",children:[s.jsx(j,{className:"w-5 h-5 text-eco-600"}),"绿色积分"]}),s.jsx(o,{to:"/user/green-points",className:"text-sm text-eco-600 hover:underline",children:"查看详情"})]}),s.jsxs("div",{className:"flex items-center gap-6 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-4xl",children:z.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-eco-700",children:P}),s.jsx("div",{className:"text-sm text-eco-600",children:z.name})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-eco-600",children:"升级进度"}),s.jsx("span",{className:"text-eco-700 font-medium",children:D.next?`${Math.round(100*D.progress)}%`:"已满级"})]}),s.jsx("div",{className:"h-2 bg-eco-200 rounded-full overflow-hidden",children:s.jsx(m.div,{initial:{width:0},animate:{width:100*D.progress+"%"},className:"h-full bg-gradient-to-r from-eco-500 to-bamboo-500"})})]})]}),s.jsx("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-eco-200",children:z.benefits.slice(0,3).map((e,t)=>s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-xs text-eco-600",children:e})},t))})]}),s.jsxs(a,{variant:"carbon",className:"p-6 bg-gradient-to-br from-carbon-50 to-eco-50 border-carbon-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-bold text-carbon-800 flex items-center gap-2",children:[s.jsx(v,{className:"w-5 h-5 text-carbon-600"}),"碳账户"]}),s.jsx(o,{to:"/user/carbon-account",className:"text-sm text-carbon-600 hover:underline",children:"查看详情"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{className:"text-center p-3 bg-white/60 rounded-xl",children:[s.jsx("div",{className:"text-2xl font-bold text-eco-600",children:F>=1e3?`${(F/1e3).toFixed(1)}kg`:`${F}g`}),s.jsx("div",{className:"text-xs text-carbon-500",children:"累计碳减排"})]}),s.jsxs("div",{className:"text-center p-3 bg-white/60 rounded-xl",children:[s.jsx("div",{className:"text-2xl font-bold text-eco-600",children:H.treesPlanted}),s.jsx("div",{className:"text-xs text-carbon-500",children:"等效种树"})]}),s.jsxs("div",{className:"text-center p-3 bg-white/60 rounded-xl",children:[s.jsx("div",{className:"text-2xl font-bold text-eco-600",children:H.kmNotDriven}),s.jsx("div",{className:"text-xs text-carbon-500",children:"不开车公里"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-carbon-600",children:[s.jsx(y,{className:"w-4 h-4"}),s.jsxs("span",{children:["已解锁 ",I.length," 个碳减排里程碑"]})]})]}),s.jsxs(a,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-bold text-ink-900 flex items-center gap-2",children:[s.jsx(g,{className:"w-5 h-5 text-amber-500"}),"生态成就"]}),s.jsx(o,{to:"/collection",className:"text-sm text-primary-600 hover:underline",children:"查看全部"})]}),K.length>0?s.jsx("div",{className:"grid grid-cols-4 gap-4",children:K.slice(0,8).map(e=>s.jsxs("div",{className:"text-center group",children:[s.jsx("div",{className:"w-14 h-14 mx-auto rounded-xl bg-gradient-to-br from-eco-100 to-bamboo-100 flex items-center justify-center text-2xl mb-2 group-hover:scale-110 transition-transform",children:e.icon}),s.jsx("div",{className:"text-xs text-ink-600 truncate",children:e.name})]},e.id))}):s.jsxs("div",{className:"text-center py-8 text-ink-400",children:[s.jsx(g,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"完成体验解锁成就"})]})]}),s.jsx(o,{to:"/leaderboard",children:s.jsx(a,{className:"p-6 bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200 hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:s.jsx(b,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-ink-900",children:"生态排行榜"}),s.jsx("p",{className:"text-sm text-ink-500",children:"查看你的生态贡献排名"})]})]}),s.jsx(u,{className:"w-5 h-5 text-ink-400"})]})})}),s.jsxs(a,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-ink-900",children:"最近订单"}),s.jsx(o,{to:"/user/orders",className:"text-sm text-primary-600 hover:underline",children:"查看全部"})]}),s.jsxs("div",{className:"text-center py-8 text-ink-400",children:[s.jsx(N,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"暂无订单"})]})]})]})]})]})})}export{L as default};
