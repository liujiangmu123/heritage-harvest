const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductViewer3D-CSz3iVTi.js","assets/three-vendor-BoyHWg1a.js"])))=>i.map(i=>d[i]);
import{r as e,j as s,_ as t}from"./three-vendor-BoyHWg1a.js";import{d as a,L as i}from"./core-vendor-Csnc5NqJ.js";import{B as l}from"./index-D20SIRsj.js";import{B as r}from"./Badge-CFxPFb1t.js";import{h as n}from"./mockData-DCdIpQra.js";import{A as c,m as d,am as o,an as x,I as m,ao as h,s as u,ap as j}from"./ui-vendor-BCOa7pYq.js";const p=e.lazy(()=>t(()=>import("./ProductViewer3D-CSz3iVTi.js"),__vite__mapDeps([0,1])));function b(){return s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-ink-900",children:s.jsxs("div",{className:"text-center text-white",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 border-4 border-heritage-500 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"text-heritage-400",children:"加载3D模型中..."})]})})}function v(){const{id:t}=a(),[v,N]=e.useState(!0),[f,w]=e.useState("3d"),[g,y]=e.useState(!1),k=e.useRef(null),D=n.find(e=>e.vrSceneId===t)||n[0];return e.useEffect(()=>{"undefined"!=typeof navigator&&navigator.xr&&navigator.xr.isSessionSupported("immersive-ar").then(y)},[]),s.jsx("div",{className:"min-h-screen bg-ink-950",children:s.jsxs("div",{ref:k,className:"relative w-full h-screen",children:[s.jsx(c,{mode:"wait",children:"3d"===f?s.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0",children:s.jsx(e.Suspense,{fallback:s.jsx(b,{}),children:s.jsx(p,{productType:(null==t?void 0:t.includes("bamboo"))?"bamboo":(null==t?void 0:t.includes("tieguanyin"))?"teapot":(null==t?void 0:t.includes("batik"))?"scarf":"teapot",backgroundColor:"#1a1d24",autoRotate:!0})})},"3d"):s.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0",children:[s.jsx("img",{src:D.images[0],alt:D.name,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-black/30"})]},"panorama")}),s.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(i,{to:"/heritage",children:s.jsxs(l,{variant:"glass",size:"sm",className:"text-white",children:[s.jsx(o,{className:"w-4 h-4 mr-2"}),"返回"]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(r,{variant:"heritage",children:["national"===D.level?"国家级":"省级","非遗"]}),s.jsx(r,{variant:"outline",className:"text-white border-white/30",children:"VR沉浸体验"})]})]})}),s.jsxs("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-10",children:[s.jsxs("div",{className:"flex gap-2 p-1 bg-white/10 backdrop-blur-xl rounded-xl",children:[s.jsxs("button",{onClick:()=>w("3d"),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors "+("3d"===f?"bg-heritage-500 text-white":"text-white/60 hover:text-white"),children:[s.jsx(x,{className:"w-4 h-4"}),"3D模型"]}),s.jsxs("button",{onClick:()=>w("panorama"),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors "+("panorama"===f?"bg-heritage-500 text-white":"text-white/60 hover:text-white"),children:[s.jsx(m,{className:"w-4 h-4"}),"全景图"]})]}),g&&s.jsx("p",{className:"text-center text-heritage-400 text-xs mt-2",children:"✨ 您的设备支持AR体验"})]}),v&&s.jsxs(d.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"absolute right-4 top-1/2 -translate-y-1/2 w-80 glass-card rounded-2xl p-6 text-white",children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:D.name}),s.jsx("p",{className:"text-white/70 text-sm mb-4",children:D.description}),s.jsx("div",{className:"space-y-3 mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:D.inheritor.avatar,alt:D.inheritor.name,className:"w-10 h-10 rounded-full"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:D.inheritor.name}),s.jsx("p",{className:"text-xs text-white/60",children:D.inheritor.title})]})]})}),s.jsxs("div",{className:"border-t border-white/20 pt-4",children:[s.jsx("h3",{className:"font-medium mb-2",children:"核心技艺"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:D.techniques.map(e=>s.jsx(r,{variant:"outline",size:"sm",className:"text-white border-white/30",children:e},e))})]})]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-10 p-4",children:s.jsx("div",{className:"glass-card rounded-2xl p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-heritage-500 flex items-center justify-center",children:s.jsx(x,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"text-white",children:[s.jsx("p",{className:"font-medium",children:D.name}),s.jsx("p",{className:"text-sm text-white/60",children:"3d"===f?"3D产品展示":"全景图浏览"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>N(!v),className:"p-3 rounded-xl bg-white/10 hover:bg-white/20 transition-colors",title:"信息面板",children:s.jsx(h,{className:"w-5 h-5 text-white"})}),s.jsx("button",{onClick:()=>w("3d"===f?"panorama":"3d"),className:"p-3 rounded-xl bg-white/10 hover:bg-white/20 transition-colors",title:"切换模式",children:s.jsx(u,{className:"w-5 h-5 text-white"})}),s.jsx("button",{onClick:()=>{var e;return null==(e=k.current)?void 0:e.requestFullscreen()},className:"p-3 rounded-xl bg-white/10 hover:bg-white/20 transition-colors",title:"全屏",children:s.jsx(j,{className:"w-5 h-5 text-white"})})]})]})})}),s.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 text-center",children:s.jsx(d.div,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},className:"text-white/60 text-sm",children:"拖动鼠标或使用VR设备进行360°全景浏览"})})]})})}export{v as default};
