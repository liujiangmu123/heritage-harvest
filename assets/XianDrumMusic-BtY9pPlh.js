import{r as l,j as s,L as B,V as U,A as $,m as E}from"./index-DNTNSv4A.js";import{C as F}from"./chevron-left-iTNgPbyR.js";import{M as I}from"./music-C1RYCHRp.js";import{V as W}from"./volume-x-BnxL2V_u.js";import{I as X}from"./info-B4_OXgaz.js";const p=[{id:"gu",name:"Â†ÇÈºì",type:"percussion",keys:["Q","W","E"],sounds:["low","mid","high"],color:"#DC2626",description:"Èºì‰πê‰πãÈ≠ÇÔºåËäÇÂ•èÊ†∏ÂøÉ"},{id:"bo",name:"Â§ßÈíπ",type:"percussion",keys:["A","S"],sounds:["crash","ride"],color:"#F59E0B",description:"ÈáëÂ±û‰πãÂ£∞ÔºåÊòé‰∫ÆÊÇ†Ëøú"},{id:"luogu",name:"Èî£",type:"percussion",keys:["Z","X"],sounds:["gong","small"],color:"#EAB308",description:"ÈìúÈî£ËΩ∞È∏£ÔºåÊ∞îÂäøÁ£ÖÁ§¥"},{id:"sheng",name:"Á¨ô",type:"wind",keys:["1","2","3","4","5"],sounds:["do","re","mi","fa","sol"],color:"#10B981",description:"ÂíåÂ£∞‰πêÂô®ÔºåÊÇ†Êâ¨Âä®Âê¨"}];function _(){const w=l.useRef(null),h=l.useRef(null),d=l.useRef(null),[A,V]=l.useState(p[0]),[b,y]=l.useState(new Set),[G,q]=l.useState([]),[f,L]=l.useState(!1),[D,v]=l.useState(!0),[j,M]=l.useState(!1),[K,O]=l.useState([]),z=l.useRef(0),g=l.useCallback(()=>(h.current||(h.current=new(window.AudioContext||window.webkitAudioContext),d.current=h.current.createAnalyser(),d.current.fftSize=256,d.current.connect(h.current.destination)),h.current),[]),R=l.useCallback((t,e=.5,n="sine")=>{const a=g();if(f)return;const o=a.createOscillator(),i=a.createGain();o.type=n,o.frequency.setValueAtTime(t,a.currentTime),i.gain.setValueAtTime(.5,a.currentTime),i.gain.exponentialRampToValueAtTime(.01,a.currentTime+e),o.connect(i),i.connect(d.current||a.destination),o.start(),o.stop(a.currentTime+e)},[g,f]),k=l.useCallback(t=>{const e=g();if(f)return;const n=e.createOscillator(),a=e.createGain(),o=e.createBiquadFilter(),i={low:{freq:80,type:"sine",decay:.5},mid:{freq:150,type:"sine",decay:.3},high:{freq:250,type:"triangle",decay:.2},crash:{freq:400,type:"sawtooth",decay:.8},ride:{freq:600,type:"square",decay:.4},gong:{freq:100,type:"sine",decay:1.5},small:{freq:300,type:"triangle",decay:.3}},u=i[t]||i.mid;n.type=u.type,n.frequency.setValueAtTime(u.freq,e.currentTime),n.frequency.exponentialRampToValueAtTime(u.freq*.5,e.currentTime+u.decay),o.type="lowpass",o.frequency.setValueAtTime(2e3,e.currentTime),a.gain.setValueAtTime(.8,e.currentTime),a.gain.exponentialRampToValueAtTime(.01,e.currentTime+u.decay),n.connect(o),o.connect(a),a.connect(d.current||e.destination),n.start(),n.stop(e.currentTime+u.decay)},[g,f]),N=l.useCallback(t=>{R({do:262,re:294,mi:330,fa:349,sol:392}[t]||262,.8,"sine")},[R]),S=l.useCallback(t=>{const e=w.current;if(!e)return;const n={id:z.current++,x:e.width/2,y:e.height/2,size:Math.random()*20+10,color:t,velocity:{x:(Math.random()-.5)*10,y:(Math.random()-.5)*10},life:0,maxLife:60};q(a=>[...a.slice(-50),n])},[]),C=l.useCallback(t=>{const e=t.key.toUpperCase();if(!b.has(e)){y(n=>new Set([...n,e]));for(const n of p){const a=n.keys.indexOf(e);if(a!==-1){const o=n.sounds[a];n.type==="percussion"?k(o):n.type==="wind"&&N(o),S(n.color),M(!0);break}}}},[b,k,N,S]),T=l.useCallback(t=>{const e=t.key.toUpperCase();y(n=>{const a=new Set(n);return a.delete(e),a})},[]);return l.useEffect(()=>(window.addEventListener("keydown",C),window.addEventListener("keyup",T),()=>{window.removeEventListener("keydown",C),window.removeEventListener("keyup",T)}),[C,T]),l.useEffect(()=>{const t=w.current;if(!t)return;const e=t.getContext("2d");if(!e)return;let n;const a=()=>{e.fillStyle="rgba(10, 10, 20, 0.1)",e.fillRect(0,0,t.width,t.height);const o=t.width/2,i=t.height/2,u=Date.now()/1e3;for(let c=0;c<5;c++){const r=50+c*40+Math.sin(u*2+c)*10,m=j?.3-c*.05:.1;e.beginPath(),e.arc(o,i,r,0,Math.PI*2),e.strokeStyle=`rgba(251, 191, 36, ${m})`,e.lineWidth=2,e.stroke()}if(q(c=>c.filter(r=>{r.life++,r.x+=r.velocity.x,r.y+=r.velocity.y,r.velocity.x*=.98,r.velocity.y*=.98;const m=1-r.life/r.maxLife,x=r.size*m;return e.beginPath(),e.arc(r.x,r.y,x,0,Math.PI*2),e.fillStyle=r.color+Math.floor(m*255).toString(16).padStart(2,"0"),e.fill(),e.beginPath(),e.arc(r.x,r.y,x*1.5,0,Math.PI*2),e.fillStyle=r.color+Math.floor(m*50).toString(16).padStart(2,"0"),e.fill(),r.life<r.maxLife})),d.current&&j){const c=new Uint8Array(d.current.frequencyBinCount);d.current.getByteFrequencyData(c);const r=t.width/c.length*2;let m=0;for(let x=0;x<c.length;x++){const P=c[x]/255*100;e.fillStyle=`hsl(${x*2}, 70%, 50%)`,e.fillRect(m,t.height-P,r-2,P),m+=r}}n=requestAnimationFrame(a)};return a(),()=>cancelAnimationFrame(n)},[j]),s.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-stone-950 via-amber-950 to-stone-900",children:[s.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex items-center justify-between z-20",children:[s.jsxs(B,{to:"/",className:"flex items-center gap-2 px-4 py-2 bg-black/40 backdrop-blur rounded-full text-amber-100 hover:bg-black/60 transition-colors",children:[s.jsx(F,{className:"w-5 h-5"}),"ËøîÂõû"]}),s.jsxs("h1",{className:"text-xl font-bold text-amber-100 flex items-center gap-2",children:[s.jsx(I,{className:"w-5 h-5"}),"Ë•øÂÆâÈºì‰πê"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>L(!f),className:"p-2 bg-black/40 backdrop-blur rounded-full text-amber-100 hover:bg-black/60 transition-colors",children:f?s.jsx(W,{className:"w-5 h-5"}):s.jsx(U,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>v(!0),className:"p-2 bg-black/40 backdrop-blur rounded-full text-amber-100 hover:bg-black/60 transition-colors",children:s.jsx(X,{className:"w-5 h-5"})})]})]}),s.jsx("canvas",{ref:w,width:800,height:500,className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-2xl",style:{background:"rgba(0,0,0,0.3)"}}),s.jsx("div",{className:"absolute top-24 left-0 right-0 z-10",children:s.jsx("div",{className:"flex justify-center gap-4",children:p.map(t=>s.jsx("button",{onClick:()=>V(t),className:`
                px-6 py-3 rounded-xl font-medium transition-all
                ${A.id===t.id?"text-white scale-105":"bg-black/30 text-white/70 hover:bg-black/50"}
              `,style:{backgroundColor:A.id===t.id?t.color:void 0},children:t.name},t.id))})}),s.jsx("div",{className:"absolute bottom-24 left-0 right-0 z-10",children:s.jsx("div",{className:"flex justify-center gap-4 flex-wrap max-w-2xl mx-auto px-4",children:p.map(t=>s.jsx("div",{className:"flex gap-2",children:t.keys.map((e,n)=>s.jsxs("button",{onMouseDown:()=>{y(a=>new Set([...a,e])),t.type==="percussion"?k(t.sounds[n]):N(t.sounds[n]),S(t.color),M(!0)},onMouseUp:()=>{y(a=>{const o=new Set(a);return o.delete(e),o})},onMouseLeave:()=>{y(a=>{const o=new Set(a);return o.delete(e),o})},className:`
                    w-16 h-16 rounded-xl font-bold text-xl transition-all
                    ${b.has(e)?"scale-95 shadow-lg":"hover:scale-105"}
                  `,style:{backgroundColor:b.has(e)?t.color:`${t.color}40`,color:"white",boxShadow:b.has(e)?`0 0 30px ${t.color}`:"none"},children:[s.jsx("div",{children:e}),s.jsx("div",{className:"text-xs opacity-70",children:t.sounds[n]})]},e))},t.id))})}),s.jsx("div",{className:"absolute bottom-8 left-0 right-0 text-center",children:s.jsx("p",{className:"text-amber-200/60 text-sm",children:"‰ΩøÁî®ÈîÆÁõò Q W E A S Z X 1 2 3 4 5 ÊºîÂ•èÔºåÊàñÁÇπÂáª‰∏äÊñπÊåâÈíÆ"})}),s.jsx($,{children:D&&s.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center z-30 bg-black/70",onClick:()=>v(!1),children:s.jsxs(E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:t=>t.stopPropagation(),className:"bg-amber-950 border border-amber-600/50 rounded-2xl p-8 max-w-lg mx-4",children:[s.jsxs("h2",{className:"text-2xl font-bold text-amber-100 mb-6 flex items-center gap-2",children:[s.jsx(I,{className:"w-6 h-6"}),"Ë•øÂÆâÈºì‰πêÊºîÂ•èÊåáÂçó"]}),s.jsx("div",{className:"space-y-4",children:p.map(t=>s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full shrink-0 mt-1",style:{backgroundColor:t.color}}),s.jsxs("div",{children:[s.jsx("div",{className:"text-amber-100 font-medium",children:t.name}),s.jsx("div",{className:"text-amber-200/70 text-sm",children:t.description}),s.jsxs("div",{className:"text-amber-200/50 text-xs mt-1",children:["ÊåâÈîÆÔºö",t.keys.join(" ")]})]})]},t.id))}),s.jsx("div",{className:"mt-6 p-4 bg-black/30 rounded-xl",children:s.jsx("p",{className:"text-amber-200/80 text-sm",children:'üí° Ë•øÂÆâÈºì‰πêË¢´Ë™â‰∏∫"‰∏≠ÂõΩÂè§‰ª£Èü≥‰πêÁöÑÊ¥ªÂåñÁü≥"ÔºåÊòØËÅîÂêàÂõΩÊïôÁßëÊñáÁªÑÁªáËÆ§ÂÆöÁöÑ‰∫∫Á±ªÈùûÁâ©Ë¥®ÊñáÂåñÈÅó‰∫ß„ÄÇ'})}),s.jsx("button",{onClick:()=>v(!1),className:"mt-6 w-full py-3 bg-amber-600 hover:bg-amber-500 text-white rounded-xl font-semibold transition-colors",children:"ÂºÄÂßãÊºîÂ•è"})]})})}),s.jsx("div",{className:"absolute top-32 left-8 w-24 h-24 rounded-full bg-amber-500/10 blur-xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-32 right-8 w-32 h-32 rounded-full bg-red-500/10 blur-xl animate-pulse",style:{animationDelay:"1s"}})]})}export{_ as default};
